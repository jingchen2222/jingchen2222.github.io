<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Chen22'S BLOG">
<meta property="og:url" content="http://jingchen2222.github.io./index.html">
<meta property="og:site_name" content="Chen22'S BLOG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chen22'S BLOG">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://jingchen2222.github.io./"/>


  <title> Chen22'S BLOG </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Chen22'S BLOG</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/09/01/ProgramStudy/JAVA/list/" itemprop="url">
                  List study
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-09-01T17:01:00+08:00" content="2018-09-01">
              2018-09-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><h5 id="List&#x65CF;&#x6700;&#x91CD;&#x8981;&#x7684;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;"><a href="#List&#x65CF;&#x6700;&#x91CD;&#x8981;&#x7684;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;" class="headerlink" title="List&#x65CF;&#x6700;&#x91CD;&#x8981;&#x7684;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;"></a>List&#x65CF;&#x6700;&#x91CD;&#x8981;&#x7684;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;</h5><ul>
<li>&#x6709;&#x5E8F;</li>
<li>&#x5141;&#x8BB8;&#x91CD;&#x590D;&#x5143;&#x7D20;</li>
<li>&#x652F;&#x6301;add, remove, set, get</li>
<li>&#x53EF;&#x4EE5;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x5143;&#x7D20;</li>
</ul>
<h5 id="Lis&#x65CF;&#x96C6;&#x5408;&#x7C7B;&#xFF1A;"><a href="#Lis&#x65CF;&#x96C6;&#x5408;&#x7C7B;&#xFF1A;" class="headerlink" title="Lis&#x65CF;&#x96C6;&#x5408;&#x7C7B;&#xFF1A;"></a>Lis&#x65CF;&#x96C6;&#x5408;&#x7C7B;&#xFF1A;</h5><p><img src="https://www.programcreek.com/wp-content/uploads/2009/02/java-collection-hierarchy.jpeg" alt="java-collection-hierarchy.jpeg"></p>
<ul>
<li>List&#x65CF;&#x4E2D;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4E09;&#x79CD;&#x96C6;&#x5408;&#x662F;<code>ArrayList</code>,<code>Vector</code>&#x548C;<code>LinkedList</code>&#xFF0C;&#x540E;&#x9762;&#x5C06;&#x5BF9;&#x8FD9;&#x4E09;&#x79CD;&#x7C7B;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x548C;&#x6BD4;&#x8F83;&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x5BF9;&#x6BD4;&#x4E00;&#x4E0B;List&#x548C;Set</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>List</th>
<th>Set</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x6709;&#x5E8F;</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>&#x91CD;&#x590D;&#x5143;&#x7D20;</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>&#x968F;&#x673A;&#x8BBF;&#x95EE;</td>
<td>Y</td>
<td>N</td>
</tr>
</tbody>
</table>
<h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p>Java Platform SE 8&#x7684;&#x63CF;&#x8FF0;&#xFF1A;</p>
<blockquote>
<p>Resizable-array implementation of the List interface. Implements all optional list operations, and permits all elements, including null. In addition to implementing the List interface, this class provides methods to manipulate the size of the array that is used internally to store the list. (This class is roughly equivalent to Vector, except that it is unsynchronized.)</p>
</blockquote>
<ul>
<li>&#x53EF;&#x53D8;&#x957F;&#x6570;&#x7EC4;</li>
<li>&#x5B9E;&#x73B0;&#x6240;&#x6709;list&#x7684;&#x64CD;&#x4F5C;</li>
<li>&#x5141;&#x8BB8;null</li>
<li>&#x548C;Vector&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;unsynchronized</li>
</ul>
<h5 id="ArrayList&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x6269;&#x5145;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;&#x3002;"><a href="#ArrayList&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x6269;&#x5145;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;&#x3002;" class="headerlink" title="ArrayList&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x6269;&#x5145;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;&#x3002;"></a><span style="color:#ab4642">ArrayList&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x6269;&#x5145;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;&#x3002;</span></h5><h4 id="&#x6027;&#x80FD;"><a href="#&#x6027;&#x80FD;" class="headerlink" title="&#x6027;&#x80FD;"></a>&#x6027;&#x80FD;</h4><blockquote>
<p>The size, isEmpty, get, set, iterator, and listIterator operations run in constant time.<br>The add operation runs in amortized constant time, that is, adding n elements requires O(n) time. </p>
</blockquote>
<ul>
<li><strong>ArrayList</strong>&#x7684;&#x6027;&#x80FD;&#x53EF;&#x4EE5;&#x7C7B;&#x6BD4;<span style="color:#ab4642">&#x6570;&#x7EC4;</span>&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5728;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x6027;&#x80FD;&#x597D;&#x3002;&#x589E;&#x3001;&#x5220;&#x64CD;&#x4F5C;&#x6027;&#x80FD;&#x5DEE;&#x3002;</li>
</ul>
<h4 id="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;"><a href="#&#x7EBF;&#x7A0B;&#x5B89;&#x5168;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;"></a>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;</h4><blockquote>
<p><span style="color:#ab4642">Note that this implementation is not synchronized&#x2026;</span></p>
</blockquote>
<p><code>Collections.synchronizedList</code>: </p>
<blockquote>
<p>Returns a synchronized (thread-safe) list backed by the specified list. In order to guarantee serial access, it is critical that all access to the backing list is accomplished through the returned list.*</p>
<ul>
<li>&#x4E0D;&#x80FD;&#x4F9D;&#x8D56;fail-fast&#x8FDB;&#x884C;&#x7A0B;&#x5E8F;&#x540C;&#x6B65;&#x63A7;&#x5236;&#xFF0C;&#x5E94;&#x8BE5;&#x5BF9;ArrayList&#x8FDB;&#x884C;&#x5305;&#x88C5;&#xFF08;<code>Collections.synchronizedList</code>&#xFF09;&#xFF0C;&#x5408;&#x6CD5;&#x7684;ArrayList&#x540C;&#x6B65;&#x64CD;&#x4F5C;demo&#xFF1A;<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">List list = Collections.synchronizedList(<span class="keyword">new</span> ArrayList());</div><div class="line">     ...</div><div class="line"> <span class="keyword">synchronized</span> (list) {</div><div class="line">     Iterator i = list.iterator(); <span class="comment">// Must be in synchronized block</span></div><div class="line">     <span class="keyword">while</span> (i.hasNext())</div><div class="line">         foo(i.next());</div><div class="line"> }</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><blockquote>
<p>The Vector class implements a growable array of objects. Like an array, it contains components that can be accessed using an integer index.</p>
<p>The iterators returned by this class&#x2019;s iterator and listIterator methods are fail-fast:&#x2026;</p>
<p>&#x2026;, If a thread-safe implementation is not needed, it is recommended to use ArrayList in place of Vector.</p>
</blockquote>
<ul>
<li>Vector&#x548C;ArrayList&#x7684;&#x6027;&#x80FD;&#x76F8;&#x4F3C;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;<span style="color:#ab4642">&#x533A;&#x522B;:</span>&#x662F;:<ul>
<li><code>Vector</code>&#x662F;<span style="color:#ab4642">&#x7EBF;&#x7A0B;&#x5B89;&#x5168;</span>&#x7684;&#x3002;</li>
<li>&#x6269;&#x5BB9;&#x673A;&#x5236;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x770B;&#x540E;&#x9762;&#x7684;<strong>&#x6269;&#x5BB9;&#x4EE3;&#x7801;&#x89E3;&#x8BFB;&#xFF1A;</strong></li>
</ul>
</li>
</ul>
<h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><blockquote>
<p>Doubly-linked list implementation of the List and Deque interfaces. Implements all optional list operations, and permits all elements (including null).<br>All of the operations perform as could be expected for a doubly-linked list. Operations that index into the list will traverse the list from the beginning or the end, whichever is closer to the specified index.</p>
</blockquote>
<h4 id="&#x6027;&#x80FD;&#xFF1A;"><a href="#&#x6027;&#x80FD;&#xFF1A;" class="headerlink" title="&#x6027;&#x80FD;&#xFF1A;"></a>&#x6027;&#x80FD;&#xFF1A;</h4><ul>
<li>&#x5177;&#x6709;&#x94FE;&#x8868;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5BF9;&#x589E;&#x52A0;&#x548C;&#x5220;&#x9664;&#x8282;&#x70B9;&#x7684;&#x64CD;&#x4F5C;&#x6548;&#x7387;&#x9AD8;&#xFF08;&#x7279;&#x522B;&#x662F;&#x8868;&#x5934;&#x6216;&#x8005;&#x8868;&#x5C3E;&#x7684;&#x64CD;&#x4F5C;&#xFF09;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x6548;&#x7387;&#x4F4E;&#x3002;</li>
<li><h4 id="&#x540C;&#x6B65;&#xFF1A;"><a href="#&#x540C;&#x6B65;&#xFF1A;" class="headerlink" title="&#x540C;&#x6B65;&#xFF1A;"></a>&#x540C;&#x6B65;&#xFF1A;</h4><blockquote>
<p>The iterators returned by this class&#x2019;s iterator and listIterator methods are fail-fast</p>
</blockquote>
</li>
<li>LinkedList&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5305;&#x88C5;&#xFF1A;<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List list = Collections.synchronizedList(<span class="keyword">new</span> LinkedList(...));</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="ArrayList-vs-Vector-vs-LinkedList"><a href="#ArrayList-vs-Vector-vs-LinkedList" class="headerlink" title="ArrayList vs Vector vs LinkedList"></a>ArrayList vs Vector vs LinkedList</h3><table>
<thead>
<tr>
<th></th>
<th>ArrayList</th>
<th>Vector</th>
<th>LinkedList</th>
</tr>
</thead>
<tbody>
<tr>
<td>list&#x63A5;&#x53E3;</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>deque&#x63A5;&#x53E3;</td>
<td>N</td>
<td>N</td>
<td>Y</td>
</tr>
<tr>
<td>elements &#x5141;&#x8BB8;null</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>growable</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>get</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr>
<td>set</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr>
<td>remove</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>add</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>synchronized</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>synchronized</td>
<td>N</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>fail-fast</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
</tbody>
</table>
<h2 id="&#x51E0;&#x4E2A;&#x503C;&#x5F97;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;"><a href="#&#x51E0;&#x4E2A;&#x503C;&#x5F97;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;" class="headerlink" title="&#x51E0;&#x4E2A;&#x503C;&#x5F97;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;"></a>&#x51E0;&#x4E2A;&#x503C;&#x5F97;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x7684;&#x95EE;&#x9898;</h2><h3 id="fail-fast"><a href="#fail-fast" class="headerlink" title="fail-fast"></a>fail-fast</h3><p> fail-fast &#x673A;&#x5236;&#x662F;java&#x96C6;&#x5408;(Collection)&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x9519;&#x8BEF;&#x673A;&#x5236;&#x3002;<code>ArrayList</code>,<code>Vector</code>, <code>LinkedList</code> &#x90FD;&#x6EE1;&#x8DB3;fail-fast&#x673A;&#x5236;&#x3002;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;fail-fast&#x7684;&#x89E3;&#x91CA;&#x5982;&#x4E0B;&#xFF1A;</p>
<blockquote>
<p>fail-fast: if the list is structurally modified at any time after the iterator is created, in any way except through the iterator&#x2019;s own remove or add methods, the iterator will throw a <code>ConcurrentModificationException</code>. Thus, in the face of concurrent modification, the iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic behavior at an undetermined time in the future.</p>
</blockquote>
<ul>
<li>fail-fast&#x4EA7;&#x751F;&#x7684;&#x539F;&#x56E0;&#x5C31;&#x5728;&#x4E8E;&#x7A0B;&#x5E8F;&#x5728;&#x5BF9;collection&#xFF08;&#x5982;: ArrayList&#xFF09;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#x65F6;&#xFF0C;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x5BF9;&#x8BE5; collection <strong>&#x5728;&#x7ED3;&#x6784;&#x4E0A;&#x5BF9;&#x5176;&#x505A;&#x4E86;&#x4FEE;&#x6539;</strong>&#xFF0C;&#x8FD9;&#x65F6;&#x8FED;&#x4EE3;&#x5668;&#x5C31;&#x4F1A;&#x629B;&#x51FA; <code>ConcurrentModificationException</code> &#x5F02;&#x5E38;&#x4FE1;&#x606F;&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F; <strong>fail-fast</strong><blockquote>
<p>&#x8981;&#x4E86;&#x89E3;fail-fast&#x673A;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8981;&#x5BF9;ConcurrentModificationException &#x5F02;&#x5E38;&#x6709;&#x6240;&#x4E86;&#x89E3;&#x3002;&#x5F53;&#x65B9;&#x6CD5;&#x68C0;&#x6D4B;&#x5230;&#x5BF9;&#x8C61;&#x7684;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#xFF0C;&#x4F46;&#x4E0D;&#x5141;&#x8BB8;&#x8FD9;&#x79CD;&#x4FEE;&#x6539;&#x65F6;&#x5C31;&#x629B;&#x51FA;&#x8BE5;&#x5F02;&#x5E38;&#x3002;&#x540C;&#x65F6;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8BE5;&#x5F02;&#x5E38;&#x4E0D;&#x4F1A;&#x59CB;&#x7EC8;&#x6307;&#x51FA;&#x5BF9;&#x8C61;&#x5DF2;&#x7ECF;&#x7531;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#xFF0C;&#x5982;&#x679C;&#x5355;&#x7EBF;&#x7A0B;&#x8FDD;&#x53CD;&#x4E86;&#x89C4;&#x5219;&#xFF0C;&#x540C;&#x6837;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x629B;&#x51FA;&#x6539;&#x5F02;&#x5E38;&#x3002;</p>
</blockquote>
</li>
</ul>
<h4 id="ConcurrentModificationException"><a href="#ConcurrentModificationException" class="headerlink" title="ConcurrentModificationException"></a>ConcurrentModificationException</h4><ul>
<li>&#x5BB9;&#x5668;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x6765;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x8BBF;&#x95EE;&#x64CD;&#x4F5C;&#x3002;&#x8FED;&#x4EE3;&#x5668;&#x672C;&#x8D28;&#x4E0A;&#x53EA;&#x662F;&#x5BB9;&#x5668;&#x7684;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#xFF0C;&#x8FED;&#x4EE3;&#x5668;&#x91CC;&#x5B58;&#x653E;&#x5BB9;&#x5668;&#x8BBF;&#x95EE;&#x7684;&#x6E38;&#x6807;&#xFF0C;&#x4EE5;&#x53CA;expectedModCount</li>
<li><code>expectedModCount</code>&#x662F;&#x8FED;&#x4EE3;&#x5668;fail-fast&#x673A;&#x5236;&#x7684;&#x5173;&#x952E;&#xFF0C;</li>
<li>&#x8FED;&#x4EE3;&#x5668;&#x5728;&#x64CD;&#x4F5C;&#x5BB9;&#x5668;&#x5143;&#x7D20;&#x524D;&#xFF0C;&#x4F1A;<code>checkForComodification</code>&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x68C0;&#x67E5;<code>expectedModCount==modCount</code></li>
<li>&#x8FED;&#x4EE3;&#x5668;&#x5728;&#x5BF9;&#x5BB9;&#x5668;&#x4F5C;&#x7ED3;&#x6784;&#x6027;&#x540E;&#xFF0C;&#x4F1A;&#x5237;&#x65B0;<code>expectedModCount = modCount</code>&#x3002;</li>
<li>&#x6362;&#x8A00;&#x4E4B;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x540C;&#x6B65;&#x5230;&#x6700;&#x65B0;&#x7684;modCount&#x540E;&#xFF0C;&#x6709;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x4FEE;&#x6539;&#x4E86;&#x5BB9;&#x5668;&#x7684;modCount&#xFF0C;&#x90A3;&#x4E48;<code>checkForComodification</code>&#x5C31;&#x4F1A;&#x6821;&#x9A8C;&#x5931;&#x8D25;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x629B;&#x51FA;<code>ConcurrentModificationException</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>{</div><div class="line">       <span class="comment">/**</span></div><div class="line">        * Index of element to be returned by subsequent call to next.</div><div class="line">        */</div><div class="line">       <span class="keyword">int</span> cursor = <span class="number">0</span>;</div><div class="line"></div><div class="line">       <span class="comment">/**</span></div><div class="line">        * Index of element returned by most recent call to next or</div><div class="line">        * previous.  Reset to -1 if this element is deleted by a call</div><div class="line">        * to remove.</div><div class="line">        */</div><div class="line">       <span class="keyword">int</span> lastRet = -<span class="number">1</span>;</div><div class="line"></div><div class="line">       <span class="comment">/**</span></div><div class="line">        * The modCount value that the iterator believes that the backing</div><div class="line">        * List should have.  If this expectation is violated, the iterator</div><div class="line">        * has detected concurrent modification.</div><div class="line">        */</div><div class="line">       <span class="keyword">int</span> expectedModCount = modCount;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">return</span> cursor != size();</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>{</div><div class="line">           checkForComodification();</div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               <span class="keyword">int</span> i = cursor;</div><div class="line">               E next = get(i);</div><div class="line">               lastRet = i;</div><div class="line">               cursor = i + <span class="number">1</span>;</div><div class="line">               <span class="keyword">return</span> next;</div><div class="line">           } <span class="keyword">catch</span> (IndexOutOfBoundsException e) {</div><div class="line">               checkForComodification();</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">           }</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</div><div class="line">           checkForComodification();</div><div class="line"></div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               AbstractList.<span class="keyword">this</span>.remove(lastRet);</div><div class="line">               <span class="keyword">if</span> (lastRet &lt; cursor)</div><div class="line">                   cursor--;</div><div class="line">               lastRet = -<span class="number">1</span>;</div><div class="line">               expectedModCount = modCount;</div><div class="line">           } <span class="keyword">catch</span> (IndexOutOfBoundsException e) {</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">           }</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">if</span> (modCount != expectedModCount)</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">       }</div><div class="line">   }</div><div class="line">   </div><div class="line">       <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListItr</span> <span class="keyword">extends</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">ListIterator</span>&lt;<span class="title">E</span>&gt; </span>{</div><div class="line">       ListItr(<span class="keyword">int</span> index) {</div><div class="line">           cursor = index;</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPrevious</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">return</span> cursor != <span class="number">0</span>;</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> E <span class="title">previous</span><span class="params">()</span> </span>{</div><div class="line">           checkForComodification();</div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               <span class="keyword">int</span> i = cursor - <span class="number">1</span>;</div><div class="line">               E previous = get(i);</div><div class="line">               lastRet = cursor = i;</div><div class="line">               <span class="keyword">return</span> previous;</div><div class="line">           } <span class="keyword">catch</span> (IndexOutOfBoundsException e) {</div><div class="line">               checkForComodification();</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">           }</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nextIndex</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">return</span> cursor;</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">previousIndex</span><span class="params">()</span> </span>{</div><div class="line">           <span class="keyword">return</span> cursor-<span class="number">1</span>;</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(E e)</span> </span>{</div><div class="line">           <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</div><div class="line">           checkForComodification();</div><div class="line"></div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               AbstractList.<span class="keyword">this</span>.set(lastRet, e);</div><div class="line">               expectedModCount = modCount;</div><div class="line">           } <span class="keyword">catch</span> (IndexOutOfBoundsException ex) {</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">           }</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span> </span>{</div><div class="line">           checkForComodification();</div><div class="line"></div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               <span class="keyword">int</span> i = cursor;</div><div class="line">               AbstractList.<span class="keyword">this</span>.add(i, e);</div><div class="line">               lastRet = -<span class="number">1</span>;</div><div class="line">               cursor = i + <span class="number">1</span>;</div><div class="line">               expectedModCount = modCount;</div><div class="line">           } <span class="keyword">catch</span> (IndexOutOfBoundsException ex) {</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</div><div class="line">           }</div><div class="line">       }</div><div class="line">   }</div></pre></td></tr></table></figure>
<p>&#x503C;&#x5F97;&#x4E00;&#x63D0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F53;&#x4E0D;&#x9002;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x8BBF;&#x95EE;&#x548C;&#x64CD;&#x4F5C;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x4F1A;&#x629B;&#x51FA;<code>ConcurrentModificationException</code>&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x7A0B;&#x5E8F;&#x6B63;&#x786E;&#x3002;&#x5373;&#x4F7F;&#xFF0C;&#x662F;&#x8FED;&#x4EE3;&#x5668;&#x8BBF;&#x95EE;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x4E5F;&#x6709;&#x6070;&#x597D;&#x672A;&#x53D1;&#x751F;<code>ConcurrentModificationException</code>&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<blockquote>
<p>Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally speaking, impossible to make any hard guarantees in the presence of unsynchronized concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a best-effort basis. Therefore, it would be wrong to write a program that depended on this exception for its correctness: the fail-fast behavior of iterators should be used only to detect bugs.<br>&#x6CE8;&#x610F;&#xFF0C;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x5FEB;&#x901F;&#x5931;&#x8D25;&#x884C;&#x4E3A;&#x65E0;&#x6CD5;&#x5F97;&#x5230;&#x4FDD;&#x8BC1;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x5BF9;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x4E0D;&#x540C;&#x6B65;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x505A;&#x51FA;&#x4EFB;&#x4F55;&#x786C;&#x6027;&#x4FDD;&#x8BC1;&#x3002;&#x5FEB;&#x901F;&#x5931;&#x8D25;&#x8FED;&#x4EE3;&#x5668;&#x4F1A;&#x5C3D;&#x6700;&#x5927;&#x52AA;&#x529B;&#x629B;&#x51FA; ConcurrentModificationException&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4E3A;&#x63D0;&#x9AD8;&#x8FD9;&#x7C7B;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x6B63;&#x786E;&#x6027;&#x800C;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x4F9D;&#x8D56;&#x4E8E;&#x6B64;&#x5F02;&#x5E38;&#x7684;&#x7A0B;&#x5E8F;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x505A;&#x6CD5;&#xFF1A;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x5FEB;&#x901F;&#x5931;&#x8D25;&#x884C;&#x4E3A;&#x5E94;&#x8BE5;&#x4EC5;&#x7528;&#x4E8E;&#x68C0;&#x6D4B; bug&#x3002;</p>
</blockquote>
<ul>
<li>&#x4E0D;&#x80FD;&#x4F9D;&#x8D56;fail-fast&#x673A;&#x5236;&#x6765;&#x4FDD;&#x8BC1;&#x7A0B;&#x5E8F;&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;<code>ConcurrentModificationException</code>&#x53EA;&#x9002;&#x5408;&#x7528;&#x6765;&#x67E5;bug&#x3002;</li>
</ul>
<h5 id="fast-fail&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;"><a href="#fast-fail&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;" class="headerlink" title="fast-fail&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;"></a>fast-fail&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;</h5><ul>
<li><code>failFastWorkTest</code>&#x7684;Thread t1&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x6765;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x8BBF;&#x95EE;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;Thread t2&#x5BF9;&#x5BB9;&#x5668;&#x8C03;&#x7528;&#x4E86;<code>ArrayList.remove(element)</code>&#x64CD;&#x4F5C;&#xFF0C;&#x6B64;&#x540E;&#xFF0C;&#x5F53;t1&#x8FED;&#x4EE3;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x65F6;&#x5019;&#xFF0C;&#xFF08;<code>next()</code>&#x4F1A;&#x68C0;&#x67E5;modCount, &#x5373;<code>checkForComodification</code>&#xFF09;&#x8FD9;&#x5C06;&#x5F15;&#x53D1;fast-fail.</li>
<li><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x63CF;&#x8FF0;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5199;&#x4E2A;demo&#x6765;&#x6D4B;&#x8BD5;ArrayList&#x7684;fast-fail&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failFastWorkTest</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ConcurrentModificationException     </span>{</div><div class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</div><div class="line">                Iterator&lt;Integer&gt; iterator = arrayList.iterator();</div><div class="line">                <span class="keyword">while</span>(iterator.hasNext()) {</div><div class="line">                    <span class="keyword">int</span> i = iterator.next();</div><div class="line">                    logger.info(<span class="string">&quot;thread t1 get item : {}&quot;</span>, i);</div><div class="line">                    <span class="keyword">try</span> {</div><div class="line">                        Thread.sleep(<span class="number">10</span>);</div><div class="line">                    } <span class="keyword">catch</span> (InterruptedException e) {</div><div class="line">                        e.printStackTrace();</div><div class="line">                    }</div><div class="line"></div><div class="line">                }</div><div class="line">            }</div><div class="line">        });</div><div class="line"></div><div class="line">        Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</div><div class="line">                    <span class="keyword">if</span> (i == <span class="number">3</span>) {</div><div class="line"><span class="comment">//                        arrayList.remove(i);</span></div><div class="line">                        arrayList.add(i);</div><div class="line">                    }</div><div class="line"></div><div class="line">                }</div><div class="line">            }</div><div class="line">        });</div><div class="line"></div><div class="line">        runThreads(t1, t2);</div><div class="line">    }</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">runThreads</span><span class="params">(Thread t1, Thread t2)</span> <span class="keyword">throws</span> InterruptedException </span>{</div><div class="line">        logger.info(<span class="string">&quot;start thread 1 &quot;</span>);</div><div class="line">        t1.start();</div><div class="line">        logger.info(<span class="string">&quot;start thread 2 &quot;</span>);</div><div class="line">        t2.start();</div><div class="line">        t1.join();</div><div class="line">        logger.info(<span class="string">&quot;end thread1 &quot;</span>);</div><div class="line">        t2.join();</div><div class="line">        logger.info(<span class="string">&quot;end thread2 &quot;</span>);</div><div class="line">        logger.info(<span class="string">&quot;fail fast test done&quot;</span>);</div><div class="line"></div><div class="line">        logger.info(<span class="string">&quot;finnal array List&quot;</span>, arrayList);</div><div class="line">    }</div></pre></td></tr></table></figure>
</li>
<li><p><code>failFastNoWorkTest</code>&#x7684;Thread t1&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x901A;&#x8FC7;ArrayList.get()&#x6765;&#x8BBF;&#x95EE;&#x5BB9;&#x5668;&#xFF0C;&#x5728;&#x8BBF;&#x95EE;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;Thread t2&#x5BF9;&#x5BB9;&#x5668;&#x8C03;&#x7528;&#x4E86;<code>ArrayList.remove(element)</code>&#x64CD;&#x4F5C;&#x3002;&#x672A;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;modCount&#x6821;&#x9A8C;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;fast-fail&#x3002;&#x5F53;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x7A0B;&#x5E8F;&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failFastNoWorkTest</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>{</div><div class="line">    Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</div><div class="line">            <span class="keyword">int</span> size = arrayList.size();</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) {</div><div class="line">                <span class="keyword">int</span> value = arrayList.get(i);</div><div class="line">                logger.info(<span class="string">&quot;thread 1 run : {}&quot;</span>, value);</div><div class="line">                printPrivateField(AbstractList.class, <span class="string">&quot;modCount&quot;</span>, arrayList);</div><div class="line"></div><div class="line">                <span class="keyword">try</span> {</div><div class="line">                    Thread.sleep(<span class="number">10</span>);</div><div class="line">                } <span class="keyword">catch</span> (InterruptedException e) {</div><div class="line">                    e.printStackTrace();</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">    });</div><div class="line"></div><div class="line">    Thread t2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() {</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; RUN_TIMES; i++) {</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (i == <span class="number">3</span>) {</div><div class="line">                    arrayList.remove(<span class="number">3</span>);</div><div class="line">                }</div><div class="line">                printPrivateField(AbstractList.class, <span class="string">&quot;modCount&quot;</span>, arrayList);</div><div class="line">                addElementByList(arrayList, <span class="number">100</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    });</div><div class="line"></div><div class="line">    logger.info(<span class="string">&quot;before start thread ... &quot;</span>);</div><div class="line">    printPrivateField(AbstractList.class, <span class="string">&quot;modCount&quot;</span>, arrayList);</div><div class="line">    <span class="keyword">new</span> ListTest().runThreads(t1, t2);</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>
<h3 id="capacity"><a href="#capacity" class="headerlink" title="capacity"></a>capacity</h3><p>&#x53E6;&#x4E00;&#x4E2A;&#x503C;&#x5F97;&#x7814;&#x7A76;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x662F;List&#x7684;&#x81EA;&#x52A8;&#x6269;&#x5BB9;&#xFF0C;&#x4E3B;&#x8981;&#x662F;ArrayList&#x548C;Vector&#x3002;</p>
<blockquote>
<p>ArrayList&#x548C;Vector&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x6570;&#x7EC4;(Array)&#x6765;&#x63A7;&#x5236;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5F53;&#x4F60;&#x5411;&#x8FD9;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#x589E;&#x52A0;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x5143;&#x7D20;&#x7684;&#x6570;&#x76EE;&#x8D85;&#x51FA;&#x4E86;&#x5185;&#x90E8;&#x6570;&#x7EC4;&#x76EE;&#x524D;&#x7684;&#x957F;&#x5EA6;&#x5B83;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x6269;&#x5C55;&#x5185;&#x90E8;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#xFF0C;Vector&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#x81EA;&#x52A8;&#x589E;&#x957F;&#x539F;&#x6765;&#x4E00;&#x500D;&#x7684;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#xFF0C;ArrayList&#x662F;&#x539F;&#x6765;&#x7684;50%,&#x6240;&#x4EE5;&#x6700;&#x540E;&#x4F60;&#x83B7;&#x5F97;&#x7684;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x6240;&#x5360;&#x7684;&#x7A7A;&#x95F4;&#x603B;&#x662F;&#x6BD4;&#x4F60;&#x5B9E;&#x9645;&#x9700;&#x8981;&#x7684;&#x8981;&#x5927;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x8981;&#x5728;&#x96C6;&#x5408;&#x4E2D;&#x4FDD;&#x5B58;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x90A3;&#x4E48;&#x4F7F;&#x7528;Vector&#x6709;&#x4E00;&#x4E9B;&#x4F18;&#x52BF;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x96C6;&#x5408;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5927;&#x5C0F;&#x6765;&#x907F;&#x514D;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x8D44;&#x6E90;&#x5F00;&#x9500;&#x3002;</p>
</blockquote>
<p>Vector<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">  * This implements the unsynchronized semantics of ensureCapacity.</div><div class="line">  * Synchronized methods in this class can internally call this</div><div class="line">  * method for ensuring capacity without incurring the cost of an</div><div class="line">  * extra synchronization.</div><div class="line">  *</div><div class="line">  * <span class="doctag">@see</span> #ensureCapacity(int)</div><div class="line">  */</div><div class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityHelper</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>{</div><div class="line">     <span class="comment">// overflow-conscious code</span></div><div class="line">     <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</div><div class="line">         grow(minCapacity);</div><div class="line"> }</div><div class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>{</div><div class="line">     <span class="comment">// overflow-conscious code</span></div><div class="line">     <span class="keyword">int</span> oldCapacity = elementData.length;</div><div class="line">     <span class="keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</div><div class="line">                                      capacityIncrement : oldCapacity);</div><div class="line">     <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</div><div class="line">         newCapacity = minCapacity;</div><div class="line">     <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</div><div class="line">         newCapacity = hugeCapacity(minCapacity);</div><div class="line">     elementData = Arrays.copyOf(elementData, newCapacity);</div><div class="line"> }</div></pre></td></tr></table></figure></p>
<p>ArrayList:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Increases the capacity to ensure that it can hold at least the</div><div class="line"> * number of elements specified by the minimum capacity argument.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> minCapacity the desired minimum capacity</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>{</div><div class="line">    <span class="comment">// overflow-conscious code</span></div><div class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</div><div class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</div><div class="line">        newCapacity = minCapacity;</div><div class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</div><div class="line">        newCapacity = hugeCapacity(minCapacity);</div><div class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></div><div class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Vector</code>&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x6269;&#x5BB9;&#x6B21;&#x6570;&#x3002;&#x53E6;&#x5916;&#xFF0C;<code>Vector</code>&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;<code>capacityIncrement</code>&#xFF0C;&#x6765;&#x914D;&#x7F6E;&#x6BCF;&#x6B21;&#x6269;&#x5BB9;&#x7684;&#x589E;&#x957F;&#x91CF;&#xFF0C;&#x6BD4;&#x8F83;&#x7075;&#x6D3B;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><p><a href="https://docs.oracle.com/javase/8/docs/api/?java/util/Collection.html" target="_blank" rel="external">ArrayList</a><br><a href="https://www.programcreek.com/simple-java/" target="_blank" rel="external">simpleJava</a><br><a href="https://blog.csdn.net/chenssy/article/details/38151189" target="_blank" rel="external">fail-fast</a><br><a href="http://www.hollischuang.com/archives/498" target="_blank" rel="external">SynchronizedList&#x548C;Vector&#x7684;&#x533A;&#x522B;, by Hollis</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/17/ProgramStudy/scala-for-impatients-ch4/" itemprop="url">
                  Scala_for_impatients_Ch4
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-17T22:22:00+08:00" content="2017-03-17">
              2017-03-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/scala/" itemprop="url" rel="index">
                    <span itemprop="name">scala</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Chapter-4-maps-and-tuples"><a href="#Chapter-4-maps-and-tuples" class="headerlink" title="Chapter 4: maps and tuples"></a>Chapter 4: maps and tuples</h1><h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><ul>
<li>Scala has a pleasant syntax for creating, querying, and traversing maps.<ul>
<li>the call map.get(key) returns an Option object that is either Some(value for key) or None.</li>
<li>for ((k, v) &lt;- map) process k and v</li>
<li>for (v &lt;- scores.values) println(v)</li>
</ul>
</li>
<li>You need to choose between mutable and immutable maps.<ul>
<li>updating map values only when it is mutable</li>
<li>You can&#x2019;t update an immutable map, but you can do something that&#x2019;s just as useful&#x2014;obtain a new map that has the desired update:</li>
</ul>
</li>
<li>By default, you get a hash map, but you can also get a tree map.<ul>
<li>You might want a tree map if you need to visit the keys in sorted order.</li>
</ul>
</li>
<li>You can easily convert between Scala and Java maps.<ul>
<li>First: import related class<ul>
<li>e.g: <code>import scala.collection.JavaConversions.mapAsScalaMap</code><br>-</li>
</ul>
</li>
<li>Second: use java class<ul>
<li>e.g: <code>val scores: scala.collection.mutable.Map[String, Int] = new java.util.TreeMap[String, Int]</code></li>
</ul>
</li>
</ul>
</li>
<li>Tuples are useful for aggregating values.<ul>
<li>Zipping is used to bundle together values so that they can be pro- cessed together<ul>
<li>If you have a collection of keys and a parallel collection of values, then zip them up and turn them into a map like<code>this:keys.zip(values).toMap</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><ol>
<li>Set up a map of prices for a number of gizmos that you covet. Then produce a second map with the same keys and the prices at a 10 percent discount.</li>
</ol>
<pre><code><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> prices = <span class="type">Map</span>(<span class="string">&quot;A&quot;</span> -&gt; <span class="number">10</span>, <span class="string">&quot;B&quot;</span> -&gt; <span class="number">20</span>, <span class="string">&quot;C&quot;</span> -&gt; <span class="number">8</span>)</div><div class="line"><span class="keyword">val</span> secondPrices = <span class="keyword">for</span>((k,v) &lt;- prices) yield (k,<span class="number">0.9</span>*v)</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Write a program that reads words from a file. Use a mutable map to count how often each word appears. To read the words, simply use a java.util.Scanner:<br>val in = new java.util.Scanner(java.io.File(&#x201C;myfile.txt&#x201D;)) while (in.hasNext()) process in.next()<br>Or look at Chapter 9 for a Scalaesque way.<br>At the end, print out all words and their counts.</li>
</ol>
<pre><code><figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. reads words from a File</span></div><div class="line"><span class="meta">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">&quot;../README.md&quot;</span>).mkString</div><div class="line"><span class="meta">val</span> words = source.split(<span class="string">&quot;\\s+&quot;</span>)</div><div class="line"></div><div class="line"><span class="comment">// 2. Use a mutable map to count how often each word appears.</span></div><div class="line"><span class="meta">val</span> wordsCount = <span class="function"><span class="keyword">new</span> <span class="title">HashMap</span>[<span class="title">String</span>, <span class="title">Int</span>]()</span></div><div class="line"><span class="title">for</span>(k &lt;- words) {</div><div class="line">  <span class="title">wordsCount</span>(k) = <span class="title">wordsCount</span>.<span class="title">getOrElse</span>(k,<span class="number">0</span>) + 1</div><div class="line">}</div><div class="line"><span class="title">println</span>(wordsCount.mkString(&quot;\n&quot;))</div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>Repeat the preceding exercise with an immutable map.</p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> wordMap2 = Map[String,Int]()</div><div class="line">val <span class="keyword">in</span> = new java<span class="selector-class">.util</span><span class="selector-class">.Scanner</span>(new java<span class="selector-class">.io</span><span class="selector-class">.File</span>(<span class="string">&quot;../README.MD&quot;</span>))</div><div class="line"></div><div class="line"><span class="function"><span class="title">while</span><span class="params">(in.hasNext()</span></span>) {</div><div class="line">  val key = <span class="keyword">in</span>.next()</div><div class="line">  wordMap2 += (key -&gt; (wordMap2.getOrElse(key,<span class="number">0</span>)+<span class="number">1</span>))</div><div class="line">}</div><div class="line"><span class="function"><span class="title">println</span><span class="params">(wordMap2)</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>Repeat the preceding exercise with a sorted map, so that the words are printed in sorted order.</p>
</li>
</ol>
<pre><code><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> wordMap3 = scala<span class="selector-class">.collection</span><span class="selector-class">.immutable</span><span class="selector-class">.SortedMap</span>[String,Int]()</div><div class="line">val <span class="keyword">in</span> = new java<span class="selector-class">.util</span><span class="selector-class">.Scanner</span>(new java<span class="selector-class">.io</span><span class="selector-class">.File</span>(<span class="string">&quot;../README.MD&quot;</span>))</div><div class="line"></div><div class="line"><span class="function"><span class="title">while</span><span class="params">(in.hasNext()</span></span>) {</div><div class="line">  val key = <span class="keyword">in</span>.next()</div><div class="line">  wordMap3 += (key -&gt; (wordMap3.getOrElse(key,<span class="number">0</span>)+<span class="number">1</span>))</div><div class="line">}</div><div class="line"><span class="function"><span class="title">println</span><span class="params">(wordMap3)</span></span></div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Repeat the preceding exercise with a java.util.TreeMap that you adapt to the Scala API.</li>
</ol>
<pre><code><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">val wordMap4:scala<span class="selector-class">.collection</span><span class="selector-class">.mutable</span><span class="selector-class">.Map</span>[String,Int] = new java<span class="selector-class">.util</span><span class="selector-class">.TreeMap</span>[String,Int]</div><div class="line">val <span class="keyword">in</span> = new java<span class="selector-class">.util</span><span class="selector-class">.Scanner</span>(new java<span class="selector-class">.io</span><span class="selector-class">.File</span>(<span class="string">&quot;../README.MD&quot;</span>))</div><div class="line"></div><div class="line"><span class="function"><span class="title">while</span><span class="params">(in.hasNext()</span></span>) {</div><div class="line">  val key = <span class="keyword">in</span>.next()</div><div class="line">  wordMap4 += (key -&gt; (wordMap4.getOrElse(key,<span class="number">0</span>)+<span class="number">1</span>))</div><div class="line">}</div><div class="line"><span class="function"><span class="title">println</span><span class="params">(wordMap4)</span></span></div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Define a linked hash map that maps &#x201C;Monday&#x201D; to java.util.Calendar.MONDAY, and similarly for the other weekdays. Demonstrate that the elements are visited in insertion order.</li>
</ol>
<pre><code><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Calendar</div><div class="line"><span class="keyword">import</span> scala.collection.<span class="keyword">mutable</span>.LinkedHashMap</div><div class="line"></div><div class="line"></div><div class="line">val <span class="built_in">map</span> = <span class="keyword">new</span> LinkedHashMap[<span class="keyword">String</span>,Int]  </div><div class="line"></div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Monday&quot;</span>-&gt;Calendar.MONDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Tuesday&quot;</span>-&gt;Calendar.TUESDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Wednesday&quot;</span>-&gt;Calendar.WEDNESDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Thursday&quot;</span>-&gt;Calendar.THURSDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Friday&quot;</span>-&gt;Calendar.FRIDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Saturday&quot;</span>-&gt;Calendar.SATURDAY)  </div><div class="line"><span class="built_in">map</span> += (<span class="string">&quot;Sunday&quot;</span>-&gt;Calendar.SUNDAY)  </div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">println</span>(<span class="built_in">map</span>.mkString(<span class="string">&quot;,&quot;</span>))</div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>Print a table of all Java properties, like this:<br>49</p>
 <figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">java.<span class="keyword">runtime</span>.name <span class="keyword">sun</span>.boot.library.path java.<span class="keyword">vm</span>.<span class="keyword">version</span> java.<span class="keyword">vm</span>.vendor java.vendor.url path.separator java.<span class="keyword">vm</span>.name</div><div class="line">| Java(TM) SE Runtime Environment</div><div class="line">| /home/apps/jdk1.<span class="number">6.0</span>_21/jre/lib/i386 | <span class="number">17.0</span>-b16</div><div class="line">| Sun Microsystems Inc.</div><div class="line">| http://java.<span class="keyword">sun</span>.<span class="keyword">com</span>/</div><div class="line">| :</div><div class="line">| Java HotSpot(TM) Server VM</div></pre></td></tr></table></figure>
</li>
</ol>
<p>You need to find the length of the longest key before you can print the table.</p>
<pre><code><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> scala.collection.JavaConversions.propertiesAsScalaMap</div><div class="line">val pros:scala.collection.Map[<span class="keyword">String</span>,<span class="keyword">String</span>] = System.getProperties()</div><div class="line">val keys = pros.keySet()</div><div class="line">val keys = pros.keySet</div><div class="line">val keyLens = <span class="keyword">for</span>(<span class="built_in">key</span> &lt;- keys) yield <span class="built_in">key</span>.length</div><div class="line">val maxLen = keyLens.<span class="built_in">max</span></div><div class="line"><span class="keyword">for</span> (<span class="built_in">key</span> &lt;- keys) {</div><div class="line">  <span class="built_in">print</span>(<span class="built_in">key</span>)</div><div class="line">  <span class="built_in">print</span>(<span class="string">&quot; &quot;</span> * (maxLen - <span class="built_in">key</span>.length))</div><div class="line">  <span class="built_in">print</span>(<span class="string">&quot; | &quot;</span>)</div><div class="line">  <span class="built_in">println</span>(pros(<span class="built_in">key</span>))</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>Write a function minmax(values: Array[Int]) that returns a pair containing the smallest and largest values in the array.</p>
 <figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">val <span class="built_in">values</span> = Array(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,-<span class="number">7</span>,-<span class="number">5</span>,<span class="number">3</span>,-<span class="number">1</span>,<span class="number">6</span>,<span class="number">0</span>)</div><div class="line"></div><div class="line">def minmax(<span class="built_in">values</span>: Array[Int]) = {</div><div class="line">  val minV = <span class="built_in">values</span>.<span class="built_in">min</span></div><div class="line">  val maxV = <span class="built_in">values</span>.<span class="built_in">max</span></div><div class="line">  (minV, maxV)</div><div class="line">}</div><div class="line"></div><div class="line">minmax(<span class="built_in">values</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>Write a function lteqgt(values: Array[Int], v: Int) that returns a triple containing the counts of values less than v, equal to v, and greater than v.</p>
</li>
</ol>
<pre><code><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def iteqgt(value<span class="variable">s:Array</span>[Int],<span class="variable">v:Int</span>)={</div><div class="line">  (<span class="built_in">values</span>.<span class="built_in">count</span>(_&lt;v),<span class="built_in">values</span>.<span class="built_in">count</span>(_==v),<span class="built_in">values</span>.<span class="built_in">count</span>(_&gt;v))</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>What happens when you zip together two strings, such as &#x201C;Hello&#x201D;.zip(&#x201C;World&#x201D;)? Come up with a plausible use case.</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/16/ProgramStudy/scala-for-impatients-ch3/" itemprop="url">
                  Scala_for_impatients_Ch3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-16T17:23:00+08:00" content="2017-03-16">
              2017-03-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/scala/" itemprop="url" rel="index">
                    <span itemprop="name">scala</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><ul>
<li>Use an Array if the length is fixed, and an ArrayBuffer if the length can vary.</li>
<li>Don&#x2019;t use new when supplying initial values.</li>
<li>Use () to access elements.</li>
<li>Use for (elem &lt;- arr) to traverse the elements.<ul>
<li>elem &lt;- 0 until s.length</li>
<li>elem &lt;- 0 until s. length reverse</li>
<li>elem &lt;- 0 untial (s.length, 2) reverse // visit every second element</li>
</ul>
</li>
</ul>
<ul>
<li>Use for (elem &lt;- arr if . . . ) . . . yield . . . to transform into a new array.<ul>
<li>The for (&#x2026;) yield loop creates a new collection of the same type as the original collection.</li>
<li>The result contains the expressions after the yield, one for each iteration of the loop.</li>
<li>Keep in mind that the result is a new collection&#x2014;the original collection is not affected.</li>
</ul>
</li>
<li>Scala and Java arrays are interoperable; with ArrayBuffer, use scala.collection. JavaConversions.<ul>
<li>The Scala buffer is wrapped into an object of a Java class that implements the java.util.List interface.</li>
</ul>
</li>
</ul>
<h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><ol>
<li>Write a code snippet that sets a to an array of n random integers between 0 (inclusive) and n (exclusive).</li>
</ol>
<pre><code><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">def randNum(n:Int):Array[Int] = {</div><div class="line">  val a = scala.util.Random</div><div class="line">  val b = new Array[<span class="string">Int</span>](<span class="link">n</span>)</div><div class="line">  for(i <span class="xml"><span class="tag">&lt;<span class="name">-</span> <span class="attr">0</span> <span class="attr">until</span> <span class="attr">b.length</span>) {</span></span></div><div class="line">    <span class="attr">b</span>(<span class="attr">i</span>) = <span class="string">a.nextInt(n)</span></div><div class="line">  }</div><div class="line">  <span class="attr">b</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="attr">val</span> <span class="attr">n</span> = <span class="string">10</span></div><div class="line"><span class="attr">println</span>(<span class="attr">randNum</span>(<span class="attr">n</span>)<span class="attr">.mkString</span>(&quot; &quot;))</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Write a loop that swaps adjacent elements of an array of integers. For example, Array(1, 2, 3, 4, 5) becomes Array(2, 1, 4, 3, 5).</li>
</ol>
<pre><code><figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="markdown">def swapsArray(a:Array[Int]) = {</span></div><div class="line"></div><div class="line">  val b = new ArrayBuffer[<span class="string">Int</span>](<span class="link"></span>)</div><div class="line"></div><div class="line">  for (i <span class="xml"><span class="tag">&lt;<span class="name">-</span> <span class="attr">0</span> <span class="attr">until</span> <span class="attr">a.length</span> <span class="attr">if</span> <span class="attr">i</span>%<span class="attr">2</span> == <span class="string">0)</span> {</span></span></div><div class="line"></div><div class="line">    <span class="attr">if</span> (<span class="attr">i</span>+<span class="attr">1</span> &lt; <span class="attr">a.length</span>) {</div><div class="line">      <span class="attr">b</span> += <span class="string">a(i+1)</span></div><div class="line">    }</div><div class="line">    <span class="attr">b</span> += <span class="string">a(i)</span></div><div class="line">  }</div><div class="line">  <span class="attr">b</span></div><div class="line"></div><div class="line">}</div><div class="line"><span class="attr">val</span> <span class="attr">a</span> = <span class="string">Array(1,2,3,4,5,6,7,8,9,10)</span></div><div class="line"><span class="attr">val</span> <span class="attr">b</span> = <span class="string">swapsArray(a)</span></div><div class="line"><span class="attr">println</span>(<span class="attr">b.mkString</span>(&quot;,&quot;))</div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>Repeat the preceding assignment, but produce a new array with the swapped values. Use for/yield.</p>
 <figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">swapsArray2</span></span>(a:<span class="type">Array</span>[<span class="type">Int</span>]) = {</div><div class="line">    <span class="keyword">val</span> temp = <span class="keyword">for</span>(i &lt;- <span class="number">0</span> until (a.length, <span class="number">2</span>)) <span class="keyword">yield</span> {</div><div class="line">      <span class="keyword">if</span> (i &lt; a.length<span class="number">-1</span>) <span class="type">Array</span>(a(i+<span class="number">1</span>), a(i))</div><div class="line">      <span class="keyword">else</span> <span class="type">Array</span>(a(i))</div><div class="line">    }</div><div class="line">    <span class="keyword">val</span> b = temp.flatten.toArray</div><div class="line">    println(b.mkString(<span class="string">&quot;,&quot;</span>))</div><div class="line">    b</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">val</span> a = <span class="type">Array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>)</div><div class="line"><span class="keyword">val</span> b = swapsArray(a)</div><div class="line">println(b.mkString(<span class="string">&quot;,&quot;</span>))</div></pre></td></tr></table></figure>
</li>
<li><p>Given an array of integers, produce a new array that contains all positive values of the original array, in their original order, followed by all values that are zero or negative, in their original order.</p>
</li>
</ol>
<pre><code><figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">def <span class="keyword">generate</span>(a:Array[Int]) = {</div><div class="line">    val pos = <span class="keyword">for</span>(i &lt;- <span class="number">0</span> <span class="keyword">until</span> a<span class="variable">.length</span> <span class="keyword">if</span> a(i)&gt;<span class="number">0</span>) yield {</div><div class="line">      a(i)</div><div class="line">    }</div><div class="line">    val neg = <span class="keyword">for</span>(i &lt;- <span class="number">0</span> <span class="keyword">until</span> a<span class="variable">.length</span> <span class="keyword">if</span> a(i)&lt;=<span class="number">0</span>) yield {</div><div class="line">      a(i)</div><div class="line">    }</div><div class="line">    val b = Array(pos, neg)<span class="variable">.flatten</span><span class="variable">.toArray</span></div><div class="line">    b</div><div class="line">}</div><div class="line"></div><div class="line">val a = Array(<span class="number">1</span>,<span class="number">2</span>,-<span class="number">4</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,-<span class="number">8</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,-<span class="number">4</span>,-<span class="number">5</span>,-<span class="number">6</span>)</div><div class="line">val b = <span class="keyword">generate</span>(a)</div><div class="line">println(b<span class="variable">.mkString</span>(<span class="string">&quot;,&quot;</span>))</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>How do you compute the average of an Array[Double]?</li>
</ol>
<pre><code><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">avg</span><span class="params">(<span class="symbol">d:</span> Array[Double])</span></span> = {</div><div class="line">  <span class="keyword">if</span> (d.length &lt;=<span class="number">0</span>) <span class="number">0</span></div><div class="line">  <span class="keyword">else</span> {</div><div class="line">    d.sum/d.length</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>How do you rearrange the elements of an Array[Int] so that they appear in</li>
</ol>
<pre><code><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(i &lt;- <span class="number">0</span> <span class="keyword">until</span> h.<span class="built_in">length</span>/<span class="number">2</span>) {</div><div class="line"> val tmp = h(i)</div><div class="line"></div><div class="line"> h(i) = h(h.<span class="built_in">length</span>-i<span class="number">-1</span>)</div><div class="line"> h(h.<span class="built_in">length</span>-i<span class="number">-1</span>) = tmp</div><div class="line"> }</div></pre></td></tr></table></figure>
</code></pre><p>reverse sorted order? How do you do the same with an ArrayBuffer[Int]?</p>
<ol>
<li><p>Write a code snippet that produces all values from an array with duplicates<br>removed. (Hint: Look at Scaladoc.)</p>
 <figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">val h = Array(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2.3</span>, <span class="number">4.4</span>,<span class="number">5.6</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">2</span>)</div><div class="line">println(h.distinct.mkString(<span class="string">&quot;,&quot;</span>))</div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>def distinct: Array[T]</p>
<p>Builds a new mutable indexed sequence from this mutable indexed sequence without any duplicate elements.</p>
</blockquote>
<ol>
<li>Rewrite the example at the end of Section 3.4, &#x201C;Transforming Arrays,&#x201D; on page 34 using the drop method for dropping the index of the first match. Look the method up in Scaladoc.</li>
</ol>
<ol>
<li>Make a collection of all time zones returned by java.util.TimeZone.getAvailableIDs that are in America. Strip off the &#x201C;America/&#x201C; prefix and sort the result.</li>
</ol>
<pre><code><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val <span class="attr">zonetime=</span> java.util.TimeZone.getAvailableIDs</div><div class="line">val <span class="attr">timeList</span> = zonetime.filter(_.take(<span class="number">8</span>)==<span class="string">&quot;America/&quot;</span>)</div><div class="line">val <span class="attr">sortedAmericaTime</span> = timeList.<span class="built_in">map</span>(_.drop(<span class="number">8</span>)).sorted</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Import java.awt.datatransfer._ and make an object of type SystemFlavorMap with the call<br>val flavors = SystemFlavorMap.getDefaultFlavorMap().asInstanceOf[SystemFlavorMap]<br>Then call the getNativesForFlavor method with parameter DataFlavor.imageFlavor and get the return value as a Scala buffer. (Why this obscure class? It&#x2019;s hard to find uses of java.util.List in the standard Java library.)</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/15/ProgramStudy/scala-for-impatients-ch2/" itemprop="url">
                  Scala_for_impatients_Ch2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-15T18:01:00+08:00" content="2017-03-15">
              2017-03-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/scala/" itemprop="url" rel="index">
                    <span itemprop="name">scala</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><ul>
<li>An if expression has a value.</li>
<li>A block has a value&#x2014;the value of its last expression.</li>
<li>The Scala for loop is like an &#x201C;enhanced&#x201D; Java for loop.<ul>
<li>for ( i -&gt; 0 to n)</li>
<li>for ( i -&gt; 0 until n)</li>
</ul>
</li>
<li>Semicolons are (mostly) optional.<ul>
<li>Need when: more than one statements on a single line</li>
</ul>
</li>
<li>The void type is Unit.</li>
<li>Avoid using return in a function.<ul>
<li>With a recursive function, you must specify the return type.</li>
</ul>
</li>
<li>Beware of missing = in a function definition.<ul>
<li>Because the procedure doesn&#x2019;t return any value, we omit the = symbol</li>
<li>It is a common error to accidentally omit the = in a function definition.You then get an error message at the point where the function is called, and you are told that Unit is not acceptable at that location.</li>
</ul>
</li>
<li>Exceptions work just like in Java or C++, but you use a &#x201C;pattern matching&#x201D; syntax for catch.</li>
<li>Scala has no checked exceptions.</li>
<li>Variable Arguments<ul>
<li>The remedy is to tell the compiler that you want the parameter to be considered an argument sequence. Append : _*, like this:<ul>
<li><code>val s = sum(1 to 5: _*) // Consider 1 to 5 as an argument sequence</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><ol>
<li><p>The signum of a number is 1 if the number is positive, &#x2013;1 if it is negative, and 0 if it is zero. Write a function that computes this value.</p>
<p> Answer:</p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">signum</span><span class="params">(<span class="symbol">i:</span>Int)</span></span>={</div><div class="line">  <span class="keyword">if</span> (i&gt;<span class="number">0</span>) <span class="number">1</span> <span class="keyword">else</span> {</div><div class="line">    <span class="keyword">if</span> (i&lt;<span class="number">0</span>) -<span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span></div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p>What is the value of an empty block expression {}? What is its type?<br>Answer: Unit</p>
</li>
<li><p>Come up with one situation where the assignment x = y = 1 is valid in Scala.<br>(Hint: Pick a suitable type for x.)</p>
<p> Answer: x is type of Unit</p>
 <figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var <span class="attr">y</span> = <span class="number">1</span></div><div class="line">var <span class="attr">x</span> = {}</div><div class="line"><span class="attr">x</span> = <span class="attr">y</span> = <span class="number">1</span></div></pre></td></tr></table></figure>
</li>
<li><p>Write a Scala equivalent for the Java loop<br>for (int i = 10; i &gt;= 0; i&#x2013;) System.out.println(i);</p>
<p> Answer:</p>
 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">for</span><span class="params">(i&lt;- <span class="number">0</span> to <span class="number">10</span>)</span></span> println(<span class="number">10</span>-i)</div><div class="line"></div><div class="line"><span class="comment">// another version of Answer</span></div><div class="line"></div><div class="line"><span class="function"><span class="title">for</span><span class="params">(i &lt;- <span class="number">0</span> to <span class="number">10</span> reverse)</span><span class="title">print</span><span class="params">(i)</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>Write a procedure countdown(n: Int) that prints the numbers from n to 0.</p>
<p> Answer:</p>
 <figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">def</span> countdown(n:<span class="keyword">Int</span>) {</div><div class="line">  <span class="keyword">for</span>(i&lt;- <span class="number">0</span> to n <span class="keyword">reverse</span>) <span class="keyword">print</span>(i)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// another version:  </span></div><div class="line"></div><div class="line"><span class="keyword">def</span> countdown(n:<span class="keyword">Int</span>) {</div><div class="line">  <span class="number">0</span> to n <span class="keyword">reverse</span> foreach <span class="keyword">print</span></div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p>Write a for loop for computing the product of the Unicode codes of all letters in a string. For example, the product of the characters in &#x201C;Hello&#x201D; is 825152896.</p>
</li>
</ol>
<pre><code>Answer:
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">productUcode</span><span class="params">(<span class="symbol">str:</span> String)</span></span><span class="symbol">:Long</span> = {</div><div class="line">  var <span class="symbol">result:</span> Long = <span class="number">1</span></div><div class="line">  <span class="keyword">for</span>(c&lt;-str) result *= c.toLong</div><div class="line">  result</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>Solve the preceding exercise without writing a loop. (Hint: Look at the StringOps Scaladoc.)</li>
</ol>
<pre><code>Answer:
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">productUcode</span><span class="params">(<span class="symbol">str:</span> String)</span></span><span class="symbol">:Long</span> = {</div><div class="line">  var <span class="symbol">result:</span> Long = <span class="number">1</span></div><div class="line">  str.foreach(result *= <span class="number">_</span>.toLong)</div><div class="line">  result</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre><ol>
<li><p>Write a function product(s : String) that computes the product, as described in the preceding exercises.</p>
<p> same with above</p>
</li>
<li><p>Make the function of the preceding exercise a recursive function</p>
<p> Answer:</p>
 <figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def productUcode2(<span class="built_in">str</span>:<span class="keyword">String</span>):Long = {</div><div class="line">  <span class="keyword">if</span>(<span class="built_in">str</span>.length == <span class="number">1</span>) <span class="keyword">return</span> <span class="built_in">str</span>.head.toLong</div><div class="line">  <span class="keyword">else</span> <span class="built_in">str</span>.head.toLong * productUcode2(<span class="built_in">str</span>.tail)</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p>Write a function that computes xn, where n is an integer. Use the following recursive definition:<br>&#x2022; xn = y2 if n is even and positive, where y = xn / 2.<br>&#x2022; xn = x&#xB7; xn &#x2013; 1 if n is odd and positive.<br>&#x2022; x0 = 1.<br>&#x2022; xn = 1 / x&#x2013;n if n is negative.<br>Don&#x2019;t use a return statement.</p>
</li>
</ol>
<pre><code>Answer:
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">def computesXn(x:<span class="built_in">Double</span>, n:<span class="built_in">Int</span>):<span class="built_in">Double</span> = {</div><div class="line">  <span class="keyword">if</span> (n==<span class="number">0</span>) <span class="number">1.</span>toDouble <span class="keyword">else</span> {</div><div class="line">    <span class="keyword">if</span> (n &lt; <span class="number">0</span>) <span class="number">1</span>/computesXn(x, -n) <span class="keyword">else</span> {</div><div class="line">      <span class="keyword">if</span> (n%<span class="number">2</span> == <span class="number">0</span>) {</div><div class="line">        <span class="keyword">val</span> y = computesXn(x, n/<span class="number">2</span>); y*y</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">        x*computesXn(x, n<span class="number">-1</span>)</div><div class="line">      }</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line">def computesXn(x:<span class="built_in">Double</span>, n:<span class="built_in">Int</span>):<span class="built_in">Double</span> = {</div><div class="line">  <span class="keyword">if</span> (n==<span class="number">0</span>) <span class="number">1.</span>toDouble</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n&gt;<span class="number">0</span> &amp;&amp; n%<span class="number">2</span>==<span class="number">0</span>) {</div><div class="line">    <span class="keyword">val</span> y = computesXn(x, n/<span class="number">2</span>); y*y</div><div class="line">  }</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n&gt;<span class="number">0</span> &amp;&amp; n%<span class="number">2</span>==<span class="number">1</span>) {</div><div class="line">    x*computesXn(x, n<span class="number">-1</span>)</div><div class="line">  }</div><div class="line">  <span class="keyword">else</span> <span class="number">1</span>/computesXn(x, -n)</div><div class="line">}</div></pre></td></tr></table></figure>
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/16/深度学习/neuron-network-machine-learning-lecture4-note/" itemprop="url">
                  neuron_network_machine_learning_lecture4_note
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-16T12:24:00+08:00" content="2017-01-16">
              2017-01-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index">
                    <span itemprop="name">study</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/Deep-learning/" itemprop="url" rel="index">
                    <span itemprop="name">Deep learning</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/Deep-learning/Neuron-network/" itemprop="url" rel="index">
                    <span itemprop="name">Neuron network</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="&#x8865;&#x5145;&#x77E5;&#x8BC6;&#x70B9;"><a href="#&#x8865;&#x5145;&#x77E5;&#x8BC6;&#x70B9;" class="headerlink" title="&#x8865;&#x5145;&#x77E5;&#x8BC6;&#x70B9;"></a>&#x8865;&#x5145;&#x77E5;&#x8BC6;&#x70B9;</h2><h3 id="Cross-Entropy"><a href="#Cross-Entropy" class="headerlink" title="Cross-Entropy"></a>Cross-Entropy</h3><h4 id="&#x4FE1;&#x606F;&#x91CF;"><a href="#&#x4FE1;&#x606F;&#x91CF;" class="headerlink" title="&#x4FE1;&#x606F;&#x91CF;"></a>&#x4FE1;&#x606F;&#x91CF;</h4><p>&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#xFF0C;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x6982;&#x7387;&#x8D8A;&#x5927;&#xFF0C;&#x5219;&#x5B83;&#x6240;&#x643A;&#x5E26;&#x7684;&#x4FE1;&#x606F;&#x91CF;&#x5C31;&#x8D8A;&#x5C0F;</p>
<p>$$I(x0)=&#x2212;log(p(x0))$$</p>
<h4 id="&#x4EC0;&#x4E48;&#x662F;&#x71B5;-entropy"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x71B5;-entropy" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x71B5; - entropy"></a>&#x4EC0;&#x4E48;&#x662F;&#x71B5; - entropy</h4><p>&#x71B5;&#x5176;&#x5B9E;&#x662F;&#x4FE1;&#x606F;&#x91CF;&#x7684;&#x671F;&#x671B;&#x503C;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x53D8;&#x91CF;&#x7684;&#x786E;&#x5B9A;&#x6027;&#x7684;&#x5EA6;&#x91CF;&#x3002;&#x71B5;&#x8D8A;&#x5927;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x53D6;&#x503C;&#x8D8A;&#x4E0D;&#x786E;&#x5B9A;&#xFF0C;&#x53CD;&#x4E4B;&#x5C31;&#x8D8A;&#x786E;&#x5B9A;&#x3002;</p>
<p>&#x71B5;&#x7684;&#x5B9A;&#x4E49;:</p>
<p>$$<br>H(X) = E_p log{\frac{1}{p(x)}}<br>$$</p>
<h4 id="&#x76F8;&#x5BF9;&#x71B5;-relative-entropy"><a href="#&#x76F8;&#x5BF9;&#x71B5;-relative-entropy" class="headerlink" title="&#x76F8;&#x5BF9;&#x71B5; - relative entropy"></a>&#x76F8;&#x5BF9;&#x71B5; - relative entropy</h4><p>&#x76F8;&#x5BF9;&#x71B5;(relative entropy)&#x53C8;&#x79F0;&#x4E3A;KL&#x6563;&#x5EA6;&#xFF08;Kullback-Leibler divergence&#xFF09;&#xFF0C;KL&#x8DDD;&#x79BB;&#xFF0C;&#x662F;&#x4E24;&#x4E2A;&#x968F;&#x673A;&#x5206;&#x5E03;&#x95F4;&#x8DDD;&#x79BB;&#x7684;&#x5EA6;&#x91CF;&#x3002;&#x8BB0;&#x4E3A;DKL(p||q)&#x3002;&#x5B83;&#x5EA6;&#x91CF;&#x5F53;&#x771F;&#x5B9E;&#x5206;&#x5E03;&#x4E3A;p&#x65F6;&#xFF0C;&#x5047;&#x8BBE;&#x5206;&#x5E03;q&#x7684;&#x65E0;&#x6548;&#x6027;&#x3002;</p>
<p>$$<br>D_{KL}(p||q) = H_p(q)&#x2212;H(p)<br>$$</p>
<h4 id="&#x4EC0;&#x4E48;&#x662F;&#x4EA4;&#x53C9;&#x71B5;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x4EA4;&#x53C9;&#x71B5;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x4EA4;&#x53C9;&#x71B5;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F;&#x4EA4;&#x53C9;&#x71B5;&#xFF1F;</h4><p>CHH(p,q)&#x662F;p,q&#x5206;&#x5E03;&#x7684;&#x4EA4;&#x53C9;&#x71B5;&#xFF0C;&#x53CD;&#x6620;&#x4E86;&#x5206;&#x5E03;p&#xFF0C;q&#x7684;&#x76F8;&#x4F3C;&#x7A0B;&#x5EA6;&#x3002;<br>$$<br>CEH(p,q) = &#x2212;[y log h<em>&#x3B8;(x)+(1&#x2212;y)log(1&#x2212;h</em>&#x3B8;(x))]<br>$$</p>
<blockquote>
<p>&#x4EA4;&#x53C9;&#x71B5;&#x4E0E;KL&#x8DDD;&#x79BB;&#x5728;&#x884C;&#x4E3A;&#x4E0A;&#x662F;&#x7B49;&#x4EF7;&#x7684;&#xFF0C;&#x90FD;&#x53CD;&#x6620;&#x4E86;&#x5206;&#x5E03;p&#xFF0C;q&#x7684;&#x76F8;&#x4F3C;&#x7A0B;&#x5EA6;&#x3002;&#x6700;&#x5C0F;&#x5316;&#x4EA4;&#x53C9;&#x71B5;&#x7B49;&#x4E8E;&#x6700;&#x5C0F;&#x5316;KL&#x8DDD;&#x79BB;&#x3002;&#x5B83;&#x4EEC;&#x90FD;&#x5C06;&#x5728;p=q&#x65F6;&#x53D6;&#x5F97;&#x6700;&#x5C0F;&#x503C;H(p)&#xFF08;p=q&#x65F6;KL&#x8DDD;&#x79BB;&#x4E3A;0&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x7684;&#x5DE5;&#x6587;&#x732E;&#x4E2D;&#x5C06;&#x6700;&#x5C0F;&#x5316;KL&#x8DDD;&#x79BB;&#x7684;&#x65B9;&#x6CD5;&#x79F0;&#x4E3A;Principle of Minimum Cross-Entropy (MCE)&#x6216;Minxent&#x65B9;&#x6CD5;&#x3002;</p>
</blockquote>
<p><a href="http://blog.csdn.net/rtygbwwwerr/article/details/50778098" title="&#x4EA4;&#x53C9;&#x71B5;&#xFF08;Cross-Entropy&#xFF09;from rtygbwwwerr&#x7684;&#x4E13;&#x680F;" target="_blank" rel="external">&#x4EA4;&#x53C9;&#x71B5;&#xFF08;Cross-Entropy&#xFF09;from rtygbwwwerr&#x7684;&#x4E13;&#x680F;</a></p>
<p><a href="https://rdipietro.github.io/friendly-intro-to-cross-entropy-loss/" title="A Friendly Introduction to Cross-Entropy Loss" target="_blank" rel="external">A Friendly Introduction to Cross-Entropy Loss</a></p>
<h3 id="N-Grams"><a href="#N-Grams" class="headerlink" title="N-Grams"></a>N-Grams</h3><h4 id="What-is-N-Grams"><a href="#What-is-N-Grams" class="headerlink" title="What is N-Grams"></a>What is N-Grams</h4><p>An n-gram is a contiguous sequence of n words, for example, in the sentence &#x201C;dog that barks does not bite&#x201D;, the n-grams are:</p>
<ul>
<li><p>unigrams (n=1): dog, that, barks, does, not, bite</p>
</li>
<li><p>bigrams (n=2): dog that, that barks, barks does, does not, not bite</p>
</li>
<li><p>trigrams (n=3): dog that barks, that barks does, barks does not, does not bite<br>etc.</p>
</li>
</ul>
<h4 id="What-are-N-grams-used-for"><a href="#What-are-N-grams-used-for" class="headerlink" title="What are N-grams used for?"></a>What are N-grams used for?</h4><p><strong>N-Grams of texts</strong> &#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x6316;&#x6398;&#x548C;&#x81EA;&#x7136;&#x8BED;&#x8A00;&#x5904;&#x7406;&#x3002;</p>
<blockquote>
<p>when developing a language model, n-grams are used to develop not just unigram models but also bigram and trigram models.</p>
</blockquote>
<ul>
<li>a publicly available web scale n-gram model by Microsoft: <a href="http://research.microsoft.com/en-us/collaboration/focus/cs/web-ngram.aspx" target="_blank" rel="external">http://research.microsoft.com/en-us/collaboration/focus/cs/web-ngram.aspx</a>.</li>
</ul>
<blockquote>
<p>a paper that uses Web N-gram models for text summarization:Micropinion Generation: An Unsupervised Approach to Generating Ultra-Concise Summaries of Opinions</p>
</blockquote>
<ul>
<li>Another use of n-grams is for developing features for supervised Machine Learning models such as SVMs, MaxEnt models, Naive Bayes, etc.</li>
</ul>
<blockquote>
<p>The idea is to use tokens such as bigrams in the feature space instead of just unigrams. But please be warned that from my personal experience and various research papers that I have reviewed, the use of bigrams and trigrams in your feature space may not necessarily yield any significant improvement. The only way to know this is to try it!</p>
</blockquote>
<p><a href="http://text-analytics101.rxnlp.com/2014/11/what-are-n-grams.html" title="What are N-Grams?" target="_blank" rel="external">What are N-Grams?</a></p>
<p><a href="http://blog.sciencenet.cn/blog-713101-797384.html" title="N-gram&#x7684;&#x539F;&#x7406;&#x3001;&#x7528;&#x9014;&#x548C;&#x7814;&#x7A76;" target="_blank" rel="external">N-gram&#x7684;&#x539F;&#x7406;&#x3001;&#x7528;&#x9014;&#x548C;&#x7814;&#x7A76;</a></p>
<h2 id="Language-Model"><a href="#Language-Model" class="headerlink" title="Language Model"></a>Language Model</h2><p><a href="http://blog.pluskid.org/?p=352" title="&#x6F2B;&#x8C08; Language Model (1): &#x539F;&#x7406;&#x7BC7;" target="_blank" rel="external">&#x6F2B;&#x8C08; Language Model (1): &#x539F;&#x7406;&#x7BC7;</a></p>
<h3 id="Language-Model&#x7684;&#x662F;&#x4EC0;&#x4E48;"><a href="#Language-Model&#x7684;&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="Language Model&#x7684;&#x662F;&#x4EC0;&#x4E48;?"></a>Language Model&#x7684;&#x662F;&#x4EC0;&#x4E48;?</h3><blockquote>
<p>Language Model &#x4E2D;&#x6587;&#x5C31;&#x53EB;&#x505A;&#x201C;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x201D;&#x5427;&#xFF0C;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x6982;&#x7387;&#x5206;&#x5E03;&#x6A21;&#x578B; P &#xFF0C;&#x5BF9;&#x4E8E;&#x8BED;&#x8A00;&#x91CC;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32; S &#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x6982;&#x7387; P(S) &#x3002;</p>
<p>&#x6211;&#x4F7F;&#x7528;&#x4E86;&#x201C;&#x5355;&#x8BCD;&#x201D;&#x3001;&#x201C;&#x5B57;&#x7B26;&#x4E32;&#x201D;&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x773C;&#xFF0C;&#x7136;&#x800C; Language Model &#x5B9E;&#x9645;&#x4E0A;&#x975E;&#x5E38;&#x901A;&#x7528;&#xFF0C;&#x4EFB;&#x4F55;&#x7531;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x5355;&#x5143;&#x7EC4;&#x6210;&#x7684;&#x5E8F;&#x5217;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Language Model &#x7684;&#x65B9;&#x6CD5;&#x6765;&#x5206;&#x6790;&#xFF0C;&#x4F8B;&#x5982; Speech Recognition &#x91CC;&#x7684;&#x97F3;&#x9891;&#x4FE1;&#x53F7;&#xFF0C;Bioinformatics &#x91CC;&#x7684;&#x57FA;&#x56E0;&#x5E8F;&#x5217;&#x7B49;&#x3002;</p>
</blockquote>
<h3 id="Language-Model-&#x6709;&#x4EC0;&#x4E48;&#x7528;"><a href="#Language-Model-&#x6709;&#x4EC0;&#x4E48;&#x7528;" class="headerlink" title="Language Model &#x6709;&#x4EC0;&#x4E48;&#x7528;?"></a>Language Model &#x6709;&#x4EC0;&#x4E48;&#x7528;?</h3><blockquote>
<p>&#x6587;&#x6863;&#x5B57;&#x8BCD;&#x7F3A;&#x5931;<br>&#x4E13;&#x95E8;&#x5EFA;&#x7ACB;&#x7279;&#x5B9A;&#x7684; Language Model&#xFF0C;&#x7136;&#x540E;&#x4F5C;&#x6A21;&#x578B;&#x5224;&#x65AD;&#xFF1B;&#x5982;&#xFF1A;&#x5224;&#x65AD;&#x6B63;&#x5E38;&#x7A0B;&#x5E8F;&#x548C;&#x75C5;&#x6BD2;<br>&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x5185;&#x5BB9;&#x5339;&#x914D;</p>
</blockquote>
<h3 id="Pros-and-cons"><a href="#Pros-and-cons" class="headerlink" title="Pros and cons"></a>Pros and cons</h3><ul>
<li>Language Model &#x7B97;&#x662F;&#x4E00;&#x79CD; Generative Model</li>
<li>Generative Model &#x5219;&#x8BD5;&#x56FE;&#x5BFB;&#x6C42;&#x6570;&#x636E;&#x7684;&#x672C;&#x8D28;&#xFF0C;&#x4E00;&#x4F46;&#x6210;&#x529F;&#x6784;&#x9020;&#x51FA;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x9645;&#x6A21;&#x578B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x5B83;&#x6765;&#x505A;&#xFF08;&#x51E0;&#x4E4E;&#xFF09;&#x4EFB;&#x4F55;&#x4E8B;&#x60C5;</li>
<li>&#x4E0D;&#x8FC7;&#xFF0C;&#x4E00;&#x5207;&#x90FD;&#x5EFA;&#x7ACB;&#x5728;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x591F;&#x627E;&#x51FA; the true model &#x7684;&#x524D;&#x63D0;&#x4E0B;</li>
</ul>
<h3 id="Language-Model-&#x6784;&#x5EFA;"><a href="#Language-Model-&#x6784;&#x5EFA;" class="headerlink" title="Language Model &#x6784;&#x5EFA;"></a>Language Model &#x6784;&#x5EFA;</h3><p>$$<br>P(S) = P(w_1w_2&#x2026; w_n)<br>= P(w<em>1)\Pi</em>{i=2}^{n}P(w_i|w<em>1&#x2026;w</em>{i-1})<br>$$</p>
<h4 id="&#x5F15;&#x51FA;&#x95EE;&#x9898;"><a href="#&#x5F15;&#x51FA;&#x95EE;&#x9898;" class="headerlink" title="&#x5F15;&#x51FA;&#x95EE;&#x9898;"></a>&#x5F15;&#x51FA;&#x95EE;&#x9898;</h4><p><strong><font color="red">context&#x957F;&#x5EA6;&#x589E;&#x957F;&#xFF0C;&#x6A21;&#x578B;&#x8BA1;&#x7B97;&#x91CF;&#x7206;&#x70B8;&#x6027;&#x589E;&#x957F;</font></strong></p>
<blockquote>
<p>&#x5728;&#x6784;&#x9020;&#x6A21;&#x578B;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7EDF;&#x8BA1;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x91CC;&#x5404;&#x4E2A;&#x5355;&#x8BCD;&#xFF08;&#x5728;&#x5404;&#x4E2A; context &#x4E4B;&#x4E0B;&#xFF09;&#x51FA;&#x73B0;&#x7684;&#x9891;&#x7387;&#x6765;&#x8FD1;&#x4F3C;&#x903C;&#x8FD1;&#x5B83;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x95EE;&#x9898;&#x5728;&#x8FD9;&#x91CC;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x4E86;&#xFF0C;&#x672C;&#x8EAB;&#x968F;&#x7740; context &#x957F;&#x5EA6;&#x7684;&#x589E;&#x957F;&#xFF0C;&#x53EF;&#x80FD;&#x7684;&#x60C5;&#x51B5;&#x4F1A;&#x7206;&#x70B8;&#x6027;&#x5730;&#x589E;&#x957F;&#xFF0C;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x4E0D;&#x53EF;&#x80FD;&#x8986;&#x76D6;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x66F4;&#x4E25;&#x91CD;&#x7684;&#x662F;&#xFF0C;&#x8981;&#x5B58;&#x50A8;&#x8FD9;&#x4E9B;&#x9891;&#x7387;&#x503C;&#x6240;&#x9700;&#x7684;&#x7A7A;&#x95F4;&#x4E5F;&#x662F;&#x6307;&#x6570;&#x589E;&#x957F;&#x7684;&#x3002;</p>
</blockquote>
<h4 id="&#x6734;&#x7D20;&#x8D1D;&#x53F6;&#x65AF;"><a href="#&#x6734;&#x7D20;&#x8D1D;&#x53F6;&#x65AF;" class="headerlink" title="&#x6734;&#x7D20;&#x8D1D;&#x53F6;&#x65AF;"></a>&#x6734;&#x7D20;&#x8D1D;&#x53F6;&#x65AF;</h4><blockquote>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x7206;&#x70B8;&#x6027;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x589E;&#x957F;&#xFF0C;&#x6709;&#x4EBA;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x80C6;&#x7684;&#x8FD1;&#x4F3C;&#x65B9;&#x6CD5;&#xFF1A;&#x629B;&#x5F03;&#x6240;&#x6709;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#x3002;&#x73B0;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x51FA;&#x73B0;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x6A21;&#x578B;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x540C;&#x7B49;&#x5BF9;&#x5F85;&#x4E86;</p>
</blockquote>
<p>$$<br>P(S) = P(w_1w_2&#x2026; w<em>n)<br>= \Pi</em>{i=1}^{n}P(w_i)<br>$$</p>
<p>&#x6734;&#x7D20;&#x8D1D;&#x53F6;&#x65AF;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x573A;&#x666F;&#x5E94;&#x7528;&#x4E0A;&#xFF0C;&#x56E0;&#x4E3A;&#x6A21;&#x578B;&#x8FD8;&#x662F;&#x592A;&#x7B80;&#x5355;&#xFF0C;&#x9020;&#x6210;&#x4E86;&#x6BD4;&#x8F83;&#x5927;&#x7684; bias &#xFF0C;&#x6548;&#x679C;&#x5E76;&#x4E0D;&#x597D;&#x3002;</p>
<p>&#x6298;&#x8877;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8003;&#x8651;&#x4E00;&#x5B9A;&#x957F;&#x5EA6;&#x4EE5;&#x5185;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x3002;<br>unigram&#x3001;bigram&#x3001;trigram &#x4EE5;&#x53CA;&#x901A;&#x7528;&#x7684; n-gram&#x3002;</p>
<h3 id="Language-Model-&#x6784;&#x5EFA;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;"><a href="#Language-Model-&#x6784;&#x5EFA;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;" class="headerlink" title="Language Model &#x6784;&#x5EFA;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;"></a>Language Model &#x6784;&#x5EFA;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</h3><p>&#x8BE6;&#x60C5;&#x89C1;pluskid&#x535A;&#x5BA2;&#xFF1A;<a href="http://blog.pluskid.org/?p=361" title="&#x6F2B;&#x8C08; Language Model (2): &#x5B9E;&#x8DF5;&#x7BC7;" target="_blank" rel="external">&#x6F2B;&#x8C08; Language Model (2): &#x5B9E;&#x8DF5;&#x7BC7;</a></p>
<h4 id="&#x6D6E;&#x70B9;&#x7CBE;&#x5EA6;&#x95EE;&#x9898;"><a href="#&#x6D6E;&#x70B9;&#x7CBE;&#x5EA6;&#x95EE;&#x9898;" class="headerlink" title="&#x6D6E;&#x70B9;&#x7CBE;&#x5EA6;&#x95EE;&#x9898;"></a>&#x6D6E;&#x70B9;&#x7CBE;&#x5EA6;&#x95EE;&#x9898;</h4><p>Language Model &#x8BA1;&#x7B97;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x91C7;&#x7528;&#x8FDE;&#x4E58;&#xFF1A;<br>$$<br>P(S) = P(w_1w_2&#x2026; w<em>n)<br>= \Pi</em>{i=1}^{n}P(w_i)<br>$$</p>
<p>&#x867D;&#x7136;&#xFF0C;&#x7528;&#x6D6E;&#x70B9;&#x8868;&#x793A;&#x6BCF;&#x4E00;&#x4E2A; $P(w_i)$ &#x90FD;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#x6781;&#x5C0F;&#x7684;&#x6570;&#x5B57;&#x4E58;&#x8D77;&#x6765;&#xFF0C;&#x4E00;&#x4E0D;&#x5C0F;&#x5FC3;&#x5C31;&#x4F1A;&#x8D85;&#x51FA;&#x6D6E;&#x70B9;&#x6570;&#x7684;&#x7CBE;&#x5EA6;&#x8303;&#x56F4;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x8BA1;&#x7B97;&#x673A;&#x5C31;&#x4F1A;&#x628A;&#x5B83;&#x5F53;&#x4F5C; 0 &#x4E86;&#x3002;</p>
<blockquote>
<p>&#x89E3;&#x51B3;&#x7684;&#x529E;&#x6CD5;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x65E2;&#x7136;&#x95EE;&#x9898;&#x51FA;&#x5728;&#x8FDE;&#x4E58;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x62FF;&#x8FDE;&#x4E58;&#x5F00;&#x5200;&#x2014;&#x2014;&#x5728;&#x524D;&#x9762;&#x52A0;&#x4E00;&#x4E2A; $\log$ &#xFF0C;&#x8BA9;&#x5B83;&#x53D8;&#x6210;&#x8FDE;&#x52A0;&#xFF1A;</p>
</blockquote>
<p>$$<br>log(P(S)) = \sum_{i=1}^{n}logP(w_i)<br>$$</p>
<p>$\log$ &#x51FD;&#x6570;&#x662F;&#x5355;&#x8C03;&#x9012;&#x589E;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;$log(P(S))$&#x548C;P(S)&#x7684;&#x6C42;&#x6781;&#x5927;&#x503C;&#xFF08;&#x6781;&#x5C0F;&#x503C;&#xFF09;&#x6548;&#x679C;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<blockquote>
<p>$\log$ &#x51FD;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x8C03;&#x9012;&#x589E;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x539F;&#x6765;&#x7684;&#x5927;&#x5C0F;&#x6BD4;&#x8F83;&#x73B0;&#x5728;&#x8FD8;&#x662F;&#x7167;&#x6837;&#x6BD4;&#x8F83;&#x5373;&#x53EF;&#x3002;&#x4E0D;&#x8FC7;&#x6709;&#x4E00;&#x70B9;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;&#xFF1A;$\log$ &#x51FD;&#x6570;&#x5728; 0 &#x5904;&#x662F;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x7684;&#xFF08;&#x6216;&#x8005;&#x8BF4; -\infty&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x907F;&#x514D;&#x6982;&#x7387;&#x503C;&#x4E3A; 0 &#x7684;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x8BF4;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
</blockquote>
<h4 id="0&#x6982;&#x7387;&#x95EE;&#x9898;"><a href="#0&#x6982;&#x7387;&#x95EE;&#x9898;" class="headerlink" title="0&#x6982;&#x7387;&#x95EE;&#x9898;"></a>0&#x6982;&#x7387;&#x95EE;&#x9898;</h4><ul>
<li>log&#x51FD;&#x6570;&#x4E0B;&#xFF0C;&#x8981;&#x907F;&#x514D;&#x51FA;&#x73B0;0&#x6982;&#x7387;</li>
<li>&#x5728;&#x5F15;&#x5165;&#x65B0;&#x8BCD;&#x7684;context&#x4E0B;&#xFF0C;&#x7ED3;&#x6784;&#x8F83;&#x597D;&#xFF08;&#x7B26;&#x5408;&#x8BED;&#x6CD5;&#x89C4;&#x5219;&#xFF09;&#x7684;&#x53E5;&#x5B50;&#x548C;&#x7ED3;&#x6784;&#x8F83;&#x5DEE;&#xFF08;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x8BED;&#x6CD5;&#xFF09;&#x7684;&#x53E5;&#x5B50;P(S)&#x90FD;&#x662F;0&#x3002;</li>
</ul>
<h5 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;-&#x2014;&#x2014;-smoothing"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;-&#x2014;&#x2014;-smoothing" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848; &#x2014;&#x2014; smoothing"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848; &#x2014;&#x2014; smoothing</h5><p>$$<br>P(w<em>i) = \frac{N</em>{w_i} + 1}{N+ |W|}<br>$$<br>&#x5176;&#x4E2D;&#xFF0C;$|W|$ &#x662F;&#x603B;&#x7684;&#x5355;&#x8BCD;&#x7684;&#x4E2A;&#x6570;&#x3002;</p>
<p>smoothing&#x65B9;&#x6CD5;&#x4E0D;&#x9002;&#x7528;N-gram&#x6A21;&#x578B;&#x3002;</p>
<h5 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;-&#x2014;&#x2014;-back-off"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;-&#x2014;&#x2014;-back-off" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848; &#x2014;&#x2014; back-off"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848; &#x2014;&#x2014; back-off</h5><blockquote>
<p>&#x56DE;&#x9000;&#xFF08;back-off&#xFF09;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EB;&#x505A; Katz Smoothing&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x5728; n-gram &#x7684;&#x6A21;&#x578B;&#x4E2D;</p>
</blockquote>
<p>&#x4EE5;&#x4E00;&#x4E2A; trigram &#x6A21;&#x578B;&#x4E3A;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x7684;&#x529E;&#x6CD5;&#x8BA1;&#x7B97;&#x6761;&#x4EF6;&#x6982;&#x7387;</p>
<p><img src="http://ogqir9ige.bkt.clouddn.com/4f3544693456382cb8c2ee5d066e33b1.png" alt=""></p>
<blockquote>
<p>&#x4E0B;&#x6807; $\text{ML}$ &#x8868;&#x793A;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x6700;&#x5927;&#x4F3C;&#x7136;&#x7684;&#x65B9;&#x6CD5;&#x4F30;&#x8BA1;&#x51FA;&#x6765;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x5982;&#x524D;&#x9762;&#x6240;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709; $w_1w_2w_3$ &#x51FA;&#x73B0;&#x5728;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x4E2A;&#x5F0F;&#x5B50;&#x4F1A;&#x5F97;&#x96F6;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x56DE;&#x9000;&#x7684;&#x529E;&#x6CD5;&#x6765;&#x8BA1;&#x7B97;&#x5B83;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x51CF;&#x5C0F;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x56E0;&#x6B64;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x6982;&#x7387;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x5982;&#x4E0B;:<br>&#x56E0;&#x6B64;&#x91CD;&#x65B0;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x6982;&#x7387;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
</blockquote>
<p><img src="http://ogqir9ige.bkt.clouddn.com/c0371df3d09f3bba0829850932d0016c.png" alt="Katz"></p>
<p>$&#x5176;&#x4E2D; \alpha(w_1w_2) &#x662F;&#x56DE;&#x9000;&#x7CFB;&#x6570;&#xFF0C;d_r &#x662F;&#x6253;&#x6298;&#x7684;&#x6298;&#x6263;&#x7CFB;&#x6570;&#xFF0C;&#x4E0B;&#x6807; r = C(w_1w_2w_3)$</p>
<p>&#x8FD9;&#x90E8;&#x5206;&#x63A8;&#x5BFC;&#x5E76;&#x6CA1;&#x6709;&#x7406;&#x89E3;&#x5F88;&#x6E05;&#x695A;&#x3002;&#x5927;&#x4F53;&#x4E0A;&#x7406;&#x89E3;&#x4E0B;&#x6765;&#xFF1A;</p>
<ul>
<li>&#x9047;&#x5230;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x8BCD;&#xFF0C;&#x5C31;&#x5220;&#x51CF;&#x8BCD;&#x2014;&#x2014;&#x56DE;&#x9000;&#xFF0C;&#x53BB;&#x8BA1;&#x7B97;&#x66F4;&#x5C0F;&#x957F;&#x5EA6;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6982;&#x7387;&#xFF0C;&#x5982;Trigram&#x56DE;&#x9000;&#x5230;Bigram,&#x5982;&#x679C;&#x4ECD;&#x5B58;&#x5728;0&#x6982;&#x7387;&#xFF0C;&#x7EE7;&#x7EED;&#x56DE;&#x9000;&#x5230; unigram</li>
</ul>
<h2 id="A-Neural-Probabilistic-Language-Model"><a href="#A-Neural-Probabilistic-Language-Model" class="headerlink" title="A Neural Probabilistic Language Model"></a>A Neural Probabilistic Language Model</h2><p><a href="http://www.jmlr.org/papers/volume3/bengio03a/bengio03a.pdf" target="_blank" rel="external">A Neural Probabilistic Language Model, Journal of Machine Learning Research 3 (2003) 1137&#x2013;1155, by Yoshua Bengio &#x2026; </a></p>
<p><a href="http://blog.csdn.net/tuqinag/article/details/43798033" title="Deep Learning &#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#xFF08;&#x5341;&#x4E8C;&#xFF09;&#xFF1A;A Neural Probabilistic Language Model" target="_blank" rel="external"> Deep Learning &#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#xFF08;&#x5341;&#x4E8C;&#xFF09;&#xFF1A;A Neural Probabilistic Language Model</a></p>
<p><a href="http://cpmarkchang.logdown.com/posts/255785-neural-network-neural-probabilistic-language-model" title="&#x985E;&#x795E;&#x7D93;&#x7DB2;&#x8DEF; -- Neural Probabilistic Language Model" target="_blank" rel="external">&#x985E;&#x795E;&#x7D93;&#x7DB2;&#x8DEF; &#x2013; Neural Probabilistic Language Model</a><br> &#x8FD9;&#x7BC7;&#x4E2D;&#x6587;&#x535A;&#x5BA2;&#x7B80;&#x660E;&#x627C;&#x8981;&#x3002;&#x611F;&#x8C22;&#x535A;&#x4E3B;&#x65E0;&#x79C1;&#x5206;&#x4EAB;&#x65B0;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x7528;&#x8FD9;&#x4E48;&#x5E72;&#x7EC3;&#x7684;&#x8BED;&#x8A00;&#x8868;&#x8FBE;&#x51C6;&#x786E;&#xFF0C;</p>
<h3 id="1-1-Fighting-the-Curse-of-Dimensionality-with-Distributed-Representations"><a href="#1-1-Fighting-the-Curse-of-Dimensionality-with-Distributed-Representations" class="headerlink" title="1.1 Fighting the Curse of Dimensionality with Distributed Representations"></a>1.1 Fighting the Curse of Dimensionality with Distributed Representations</h3><h4 id="&#x65B9;&#x6CD5;&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;"><a href="#&#x65B9;&#x6CD5;&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;" class="headerlink" title="&#x65B9;&#x6CD5;&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;"></a>&#x65B9;&#x6CD5;&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;</h4><ol>
<li><p>&#x6BCF;&#x4E00;&#x4E2A;word&#x5173;&#x8054;&#x4E00;&#x4E2A;feature vector</p>
</li>
<li><p>express the joint probability function</p>
</li>
<li><p>learn feature vector and probability function</p>
</li>
</ol>
<p>&gt;</p>
<ol>
<li>associate with each word in the vocabulary a distributed word feature vector (a real- valued vector in $R^m$),<br>&gt;</li>
<li>express the joint probability function of word sequences in terms of the feature vectors of these words in the sequence, and<br>&gt;</li>
<li>learn simultaneously the word feature vectors and the parameters of that probability function.</li>
</ol>
<h4 id="feature-vector"><a href="#feature-vector" class="headerlink" title="feature vector"></a>feature vector</h4><ul>
<li>represent different aspects of the word</li>
<li>number of features is much smaller than the size of the vocabulary.</li>
<li>the feature vector are learned</li>
<li>the feature vector could be initialized using prior knowledge of semantic feature</li>
</ul>
<h4 id="probability-function"><a href="#probability-function" class="headerlink" title="probability function"></a>probability function</h4><ul>
<li>probability function expressed as: a product of conditional probabilities of the next word given the previous ones.</li>
<li>This function has parameters can be tuned to maximize the log-likelihood of the training data.</li>
</ul>
<h3 id="A-Neural-Model"><a href="#A-Neural-Model" class="headerlink" title="A Neural Model"></a>A Neural Model</h3><h4 id="Neural-architecture"><a href="#Neural-architecture" class="headerlink" title="Neural architecture"></a>Neural architecture</h4><p><img src="http://ogqir9ige.bkt.clouddn.com/598bb8720388e105d248f1a61a61c482.png" alt="Neural architecture"></p>
<p>$$<br>L = 1/T &#x2211;log f(w<em>t,w</em>{t&#x2212;1},&#xB7;&#xB7;&#xB7; ,w_{t&#x2212;n+1};&#x3B8;)+R(&#x3B8;),<br>$$</p>
<h4 id="parameters"><a href="#parameters" class="headerlink" title="parameters"></a>parameters</h4><ul>
<li>&#x81EA;&#x7531;&#x53C2;&#x4E2A;&#x6570;&#x6B63;&#x6BD4;&#x4E8E; vocabulary&#x89C4;&#x6A21;&#xFF0C;V</li>
<li>&#x57FA;&#x4E8E;sharing structure&#xFF0C;&#x81EA;&#x7531;&#x53C2;&#x4E2A;&#x6570;&#x5C06;sub-linear with V</li>
</ul>
<blockquote>
<p>In the above model, the number of free parameters only scales linearly with V , the number of words in the vocabulary. It also only scales linearly with the order n : the scaling factor could be reduced to sub-linear if more sharing structure were introduced, e.g. using a time-delay neural network or a recurrent neural network (or a combination of both).</p>
</blockquote>
<h2 id="Hierarchical-probabilistic-neural-network-language-model"><a href="#Hierarchical-probabilistic-neural-network-language-model" class="headerlink" title="Hierarchical probabilistic neural network language model"></a>Hierarchical probabilistic neural network language model</h2><p><a href="http://cpmarkchang.logdown.com/posts/276263--hierarchical-probabilistic-neural-networks-neural-network-language-model" title="&#x985E;&#x795E;&#x7D93;&#x7DB2;&#x8DEF; -- Hierarchical Probabilistic Neural Network Language Model (Hierarchical Softmax" target="_blank" rel="external">&#x985E;&#x795E;&#x7D93;&#x7DB2;&#x8DEF; &#x2013; Hierarchical Probabilistic Neural Network Language Model (Hierarchical Softmax)
</a></p>
<h2 id="Three-New-Graphical-Models-for-Statistical-Language-Modellin"><a href="#Three-New-Graphical-Models-for-Statistical-Language-Modellin" class="headerlink" title="Three New Graphical Models for Statistical Language Modellin"></a>Three New Graphical Models for Statistical Language Modellin</h2><p><a href="https://www.cs.toronto.edu/~amnih/papers/threenew.pdf" title="Three New Graphical Models for Statistical Language Modellin" target="_blank" rel="external">Three New Graphical Models for Statistical Language Modellin</a><br><a href="https://www.cs.toronto.edu/~amnih/papers/threenew.pdf" target="_blank" rel="external">https://www.cs.toronto.edu/~amnih/papers/threenew.pdf</a></p>
<h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><blockquote>
<p>We propose three new probabilistic language models that define the distribution of the next word in a sequence given several preceding words by using distributed representations of those words.</p>
<p>how real-valued distributed representations for words can be learned at the same time as learning a large set of stochastic binary hidden features that are used to predict the distributed representation of the next word from previous distributed representations.</p>
<p>Adding connections from the previous states of the binary hidden features improves performance as does adding direct connections between the real-valued distributed representations.</p>
</blockquote>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><h4 id="density-estimation-for-discrete-distributions-difficult-in-smoothing"><a href="#density-estimation-for-discrete-distributions-difficult-in-smoothing" class="headerlink" title="density estimation for discrete distributions difficult in smoothing"></a>density estimation for discrete distributions difficult in smoothing</h4><blockquote>
<p>Density estimation for discrete distributions is inherently difficult because there is no simple way to do smoothing based on input similarity.</p>
<p>Since all discrete values are equally similar (or dissimilar) assigning similar probabilities to similar inputs, which is typically done for continuous inputs, does not work in the discrete case.<br>&#x79BB;&#x6563;&#x6570;&#x636E;&#xFF0C;&#x8981;&#x4E48;&#x76F8;&#x4F3C;&#xFF0C;&#x8981;&#x4E48;&#x4E0D;&#x76F8;&#x4F3C;&#x3002;&#x65E0;&#x6CD5;&#x6839;&#x636E;&#x76F8;&#x4F3C;&#x5EA6;&#x7684;&#x4E0D;&#x540C;&#x6765;&#x5206;&#x914D;&#x6982;&#x7387;&#x3002;</p>
<p>Representing discrete structures such as words using continuous-valued distributed representations and then assigning probability to these structures based on their representations automatically introduces smoothing into the density estimation problem making the data sparsity problem less severe.</p>
</blockquote>
<h4 id="continuous-valued-distribution-representation-was-introdeced"><a href="#continuous-valued-distribution-representation-was-introdeced" class="headerlink" title="continuous-valued distribution representation was introdeced"></a>continuous-valued distribution representation was introdeced</h4><font color="blue">&#x4E8E;&#x662F;&#xFF0C;&#x5F15;&#x5165;Representing discrete structures&#xFF0C;&#xFF08;&#x5982;&#xFF1A;word&#x2019;s distributed feature vectors&#xFF09;&#x6765;&#x8868;&#x5F81;word&#x3002;&#x7528;feature vector&#x4EE3;&#x8868;&#x8BCD;&#xFF0C;words&#x8FD9;&#x79CD;&#x79BB;&#x6563;&#x7ED3;&#x6784;&#x88AB;&#x4E00;&#x4E2A;continuous-valued distribution representations&#x4EE3;&#x66FF;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;automatically introduces smoothing into the density estimation problem&#xFF0C;&#x4ECE;&#x800C;&#x7F13;&#x89E3;&#x4E86;data sparsity problem&#x3002;</font>


<h4 id="drawback-long-training-times"><a href="#drawback-long-training-times" class="headerlink" title="drawback: long training times"></a>drawback: long training times</h4><blockquote>
<p>A number of techniques have been proposed to address the main drawback of these models &#x2013; their long training times</p>
</blockquote>
<h4 id="Recently-Approach"><a href="#Recently-Approach" class="headerlink" title="Recently Approach"></a>Recently Approach</h4><ul>
<li>Hierarchical alternatives to feed-forward networks which are faster to train and use, do not perform quite as well.</li>
</ul>
<p>(Morin &amp; Bengio&#xFF1A; Hierarchical prob- abilistic neural network language model, 2005; Blitzer et al., 2005b Hierarchical distributed representations for statistical language modeling.)</p>
<ul>
<li>Recently, a stochastic model with hidden variables has been proposed for language modelling . It uses distributed representations that consist of stochastic binary variables as opposed to real numbers.</li>
</ul>
<p>(Blitzer et al., 2005a)&#xFF1A;Distributed latent variable models of lexical co- occurrences.</p>
<blockquote>
<p>&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6A21;&#x578B;&#x8BAD;&#x7EC3;&#x96BE;&#x5EA6;&#xFF0C;&#x8FD9;&#x79CD;&#x6A21;&#x578B;&#x4E0D;&#x80FD;scale well to large vocabulary sizes&#x3002;&#x56E0;&#x4E3A; inference to model&#x592A;&#x96BE;&#x4E86;&#x2014;&#x2014;&#x4F60;&#x60F3;&#x4E5F;&#x77E5;&#x9053;&#xFF0C;&#x8FD9;&#x79CD;&#x5E26;&#x5927;&#x91CF;binary variables&#x7684;model&#x8BAD;&#x7EC3;&#x96BE;&#x5EA6;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x548C;2&#x7684;&#x6307;&#x6570;&#x6B21;&#x90FD;&#x6709;&#x70B9;&#x5565;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;m&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x4EC0;&#x4E48;&#x3002;&#x5728;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x521A;&#x5F00;&#x59CB;Hinton&#x63D0;&#x51FA;&#x7684;&#x6A21;&#x578B;&#x539F;&#x578B;RBM&#x673A;&#x8BAD;&#x7EC3;&#x65F6;&#x95F4;&#x4E5F;&#x662F;&#x7EA7;&#x522B;&#x7684;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8D77;&#x89C1;&#xFF0C;&#x8FD9;&#x7BC7;&#x8BBA;&#x6587;&#x91CC;&#x9762;&#x6D89;&#x53CA;&#x5230;&#x7684;RBM&#x539F;&#x578B;&#x548C;&#x4E09;&#x4E2A;&#x57FA;&#x4E8E;Restricted Boltzmann Machine&#x7684;Models&#x5C06;&#x88AB;&#x547D;&#x540D;&#x4E3A;&#xFF1A;</p>
<ul>
<li>&#x96F6;&#x53F7;&#x673A;&#x2014;&#x2014;RBM Model</li>
<li>&#x521D;&#x53F7;&#x673A;&#x2014;&#x2014;Factored RBM</li>
<li>&#x4E8C;&#x53F7;&#x673A;&#x2014;&#x2014;The Temporal Factored RBM</li>
<li>&#x4E09;&#x53F7;&#x673A;&#x2014;&#x2014;Log-Bilinear Language Model</li>
</ul>
<p>from <a href="https://zhuanlan.zhihu.com/p/20434661" title="&#x3010;Paper&#x3011;ICML 2007 - Three New Graphical Models for Statistical Language Modeling" target="_blank" rel="external">&#x8BB8;&#x4E5D;&#x7940;-&#x77E5;&#x4E4E;</a></p>
</blockquote>
<h4 id="Out-Approach"><a href="#Out-Approach" class="headerlink" title="Out Approach"></a>Out Approach</h4><p>We start with an undirected graphical model that uses a large number of hidden binary variables to capture the desired conditional distribution.</p>
<p>Then we augment it with temporal connections between hidden units to increase the number of preceding words taken into account without significantly increasing the number of model parameters.</p>
<p>Finally, we investigate a model that predicts the distributed representation for the next word using a linear function of the distributed representations of the preceding words, without using any additional latent variables.</p>
<h3 id="The-Factored-Restricted-Boltzmann-Machine-Language-Model-&#x96F6;&#x53F7;&#x673A;&#x548C;&#x521D;&#x53F7;&#x673A;"><a href="#The-Factored-Restricted-Boltzmann-Machine-Language-Model-&#x96F6;&#x53F7;&#x673A;&#x548C;&#x521D;&#x53F7;&#x673A;" class="headerlink" title="The Factored Restricted Boltzmann Machine Language Model : &#x96F6;&#x53F7;&#x673A;&#x548C;&#x521D;&#x53F7;&#x673A;"></a>The Factored Restricted Boltzmann Machine Language Model : &#x96F6;&#x53F7;&#x673A;&#x548C;&#x521D;&#x53F7;&#x673A;</h3><h4 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h4><blockquote>
<p>Our goal is to design a probabilistic model for word sequences that uses distributed representations for words and captures the dependencies between words in a se- quence using stochastic hidden variables.</p>
</blockquote>
<ul>
<li>use distributed representations for words</li>
<li>captures the dependencies between words using stochastic hidden variables.</li>
</ul>
<h4 id="&#x96F6;&#x53F7;&#x673A;"><a href="#&#x96F6;&#x53F7;&#x673A;" class="headerlink" title="&#x96F6;&#x53F7;&#x673A;"></a>&#x96F6;&#x53F7;&#x673A;</h4><p>Energy function:</p>
<p><img src="http://ogqir9ige.bkt.clouddn.com/98fff360a8c63be13fa51c708ef24cc4.png" alt=""></p>
<p>Drawback:</p>
<ul>
<li>parameters : N * N (N is vocabulary length)</li>
<li>parameters depend on position</li>
</ul>
<p>Problems Addressed by :</p>
<h4 id="1&#x53F7;&#x673A;-2-RBM-with-distributed-representations-for-words"><a href="#1&#x53F7;&#x673A;-2-RBM-with-distributed-representations-for-words" class="headerlink" title="1&#x53F7;&#x673A;:  2. RBM with distributed representations for words"></a>1&#x53F7;&#x673A;:  2. RBM with distributed representations for words</h4><ul>
<li>introducing distributed representations</li>
<li>sharing word feature vectors</li>
<li>related work:<ul>
<li><blockquote>
<p>This type of parameterization has been used in feed-forward neural networks for mod- elling symbolic relations (Hinton, 1986) and for statis- tical language modelling (Bengio et al., 2003).</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h5 id="Feature-vectors"><a href="#Feature-vectors" class="headerlink" title="Feature vectors"></a>Feature vectors</h5><p>a real-valued feature vector of length Nf</p>
<h5 id="Energy-function"><a href="#Energy-function" class="headerlink" title="Energy function"></a>Energy function</h5><p><img src="http://ogqir9ige.bkt.clouddn.com/a830c0e317646f76edd2909704ec8199.png" alt="energy_function_no1_machine"></p>
<h5 id="Advantage-reduced-parameters-dimension"><a href="#Advantage-reduced-parameters-dimension" class="headerlink" title="Advantage : reduced parameters (dimension)"></a>Advantage : reduced parameters (dimension)</h5><ul>
<li>$N_f &lt;&lt; N_m$</li>
<li>sharing feature vectors force to capture <strong>position- invariant</strong> information</li>
</ul>
<blockquote>
<p>As can be seen from Eqs. 1 and 2, the feature-based parameteriza- tion constrains each of the visible-hidden interaction matrices Gi to be a product of two low-rank matrices R and Wi, while the original parameterization does not constrain Gi in any way.</p>
</blockquote>
<h5 id="The-joint-conditional-distribution-of-the-next-word"><a href="#The-joint-conditional-distribution-of-the-next-word" class="headerlink" title="The joint conditional distribution of the next word"></a>The joint conditional distribution of the next word</h5><p><img src="http://ogqir9ige.bkt.clouddn.com/b12c2e869cb15fbd5e8a3c26696a6654.png" alt=""></p>
<h5 id="conditional-distribution-of-the-next-word"><a href="#conditional-distribution-of-the-next-word" class="headerlink" title="conditional distribution of the next word"></a>conditional distribution of the next word</h5><p>&#x56E0;&#x6B64;&#xFF0C;w<em>n&#x5728;&#x7ED9;&#x5B9A;w</em>{1:n-1}&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x6761;&#x4EF6;&#x6982;&#x7387;&#x5C31;&#x662F;&#x516C;&#x5F0F;&#xFF08;3&#xFF09;&#x7684;&#x8FB9;&#x7F18;&#x6982;&#x7387;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x4E3A;</p>
<p><img src="http://ogqir9ige.bkt.clouddn.com/7d51d81daf6ec5262686fea143028569.png" alt=""></p>
<blockquote>
<p>&#x5C3D;&#x7BA1;&#x540C;&#x4E00;&#x4E2A;&#x8BCD;&#x5BF9;&#x5E94;&#x7684;&#x8FD8;&#x662F;&#x5728;&#x53D8;&#xFF08;&#x6BD4;&#x5982;&#x8BF4;&#x7B2C;&#x4E09;&#x4E2A;&#x8BCD;&#x662F;dog&#x548C;&#x7B2C;&#x4E00;&#x4E2A;&#x8BCD;&#x662F;dog&#x65F6;&#x5BF9;&#x5E94;&#x7684;&#x8FB9;&#x6743;&#x503C;&#x77E9;&#x9635;&#x5206;&#x522B;&#x4E3A;&#x548C;&#xFF09;&#x2014;&#x2014;&#x6839;&#x636E;&#x524D;&#x6587;&#xFF08;&#x7279;&#x522B;&#x662F;&#x90A3;&#x53E5; Using the same feature matrix  &#x2026; capture position-invariant information about words&#xFF09;&#x6697;&#x793A;&#x4E86;&#x8FD9;&#x4E2A;&#x77E9;&#x9635;&#x662F;&#x4E3A;&#x4E86;&#x6293;position-variant information about words&#x3002;</p>
<font color="red">&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x8F93;&#x5165;&#x53D8;&#x91CF;&#xFF08;&#x8F93;&#x5165;&#x53D8;&#x91CF;&#x5BF9;&#x5E94;&#x7684;&#x662F;0&#x53F7;&#x673A;&#x7684;&#x548C;&#x521D;&#x53F7;&#x673A;&#x4E2D;&#x7684;&#xFF09;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;&#x8F93;&#x5165;&#x53D8;&#x91CF;&#x56FA;&#x5B9A;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x8FD8;&#x80FD;&#x6293;position-invariant information&#x3002;</font>

</blockquote>
<h5 id="2-1-Making-Predictions"><a href="#2-1-Making-Predictions" class="headerlink" title="2.1 Making Predictions"></a>2.1 Making Predictions</h5><font color="red">&#x4ECE;&#x8FD9;&#x4E4B;&#x540E;&#xFF0C;&#x770B;&#x4E0D;&#x61C2;&#x4E86; &#x2014;&#x2014;&#x2014; 2017-01-21&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x672A;&#x5B8C;&#x5F85;&#x7EED;</font>



<h3 id="&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;"><a href="#&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;" class="headerlink" title="&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;"></a>&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;</h3><ul>
<li>Restricted Boltzmann Machines (RBM)</li>
</ul>
<h3 id="&#x96BE;&#x70B9;&#x7406;&#x89E3;&#xFF1A;"><a href="#&#x96BE;&#x70B9;&#x7406;&#x89E3;&#xFF1A;" class="headerlink" title="&#x96BE;&#x70B9;&#x7406;&#x89E3;&#xFF1A;"></a>&#x96BE;&#x70B9;&#x7406;&#x89E3;&#xFF1A;</h3><ul>
<li><p>Density estimation for discrete distributions is inherently difficult because there is no simple way to do smoothing based on input similarity.</p>
<ul>
<li><font color="red"> <strong>why smoothing is necessary?</strong></font></li>
<li>conception: density estimation</li>
</ul>
</li>
</ul>
<h4 id="Data-sparsity"><a href="#Data-sparsity" class="headerlink" title="Data sparsity"></a>Data sparsity</h4><blockquote>
<p>One of the biggest problems is that mostly the cube is very sparsely populated.<br>Many of the cell combinations might not make sense or the data for them might be missing. In the relational world storage of such data is not a problem: we only keep whatever there is. If we want to keep closer to our multidimensional view of the world, we face a dilemma: either store empty space or create an index to keep track of the nonempty cells. Or - search for an alternative solution.</p>
</blockquote>
<p><a href="https://www.quora.com/What-is-a-clear-explanation-of-data-sparsity" title="What is a clear explanation of data sparsity?" target="_blank" rel="external">What is a clear explanation of data sparsity?</a></p>
<h2 id="Restricted-Boltzmann-Machines-RBM"><a href="#Restricted-Boltzmann-Machines-RBM" class="headerlink" title="Restricted Boltzmann Machines (RBM)"></a>Restricted Boltzmann Machines (RBM)</h2><p><a href="http://image.diku.dk/igel/paper/AItRBM-proof.pdf" title="An Introduction to Restricted Boltzmann Machines" target="_blank" rel="external">An Introduction to Restricted Boltzmann Machines</a></p>
<p><a href="http://deeplearning.net/tutorial/rbm.html" title="Restricted Boltzmann Machines (RBM)" target="_blank" rel="external">Restricted Boltzmann Machines (RBM)</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/20396389?columnSlug=system" title="&#x3010;Paper&#x77E5;&#x8BC6;&#x70B9;&#x3011;Restricted Boltzmann Machines(RBM)" target="_blank" rel="external">&#x3010;Paper&#x77E5;&#x8BC6;&#x70B9;&#x3011;Restricted Boltzmann Machines(RBM)</a></p>
<h3 id="Energy-Based-Models-EBM"><a href="#Energy-Based-Models-EBM" class="headerlink" title="Energy-Based Models (EBM)"></a>Energy-Based Models (EBM)</h3><p>EBM&#x7528;energy function&#x6765;&#x8868;&#x5F81;&#x6982;&#x7387;&#x5BC6;&#x5EA6;&#x51FD;&#x6570;&#xFF1A;</p>
<blockquote>
<p>Energy-based probabilistic models define a probability distribution through an energy function, as follows:</p>
</blockquote>
<p>$$p(x) = \frac {e^{-E(x)}} {Z}.$$</p>
<p>Z&#x7528;&#x4E8E;&#x5F52;&#x4E00;&#x5316;&#xFF0C;&#x79F0;&#x4F5C;partition function&#xFF1A;</p>
<blockquote>
<p>The normalizing factor Z is called the partition function by analogy with physical systems.</p>
</blockquote>
<p>$$Z = \sum_x e^{-E(x)}$$</p>
<p>log-likelihood function:<br>$$<br>\mathcal{L}(\theta, \mathcal{D}) = \frac{1}{N} \sum_{x^{(i)} \in<br>\mathcal{D}} \log\ p(x^{(i)})\<br>$$</p>
<p>loss function:</p>
<p>$$<br>\ell (\theta, \mathcal{D}) = - \mathcal{L} (\theta, \mathcal{D})<br>$$</p>
<p>&#x5229;&#x7528;SGD&#xFF08;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF09;&#x6C42;&#x89E3;&#xFF1A;</p>
<blockquote>
<p>using the stochastic gradient $-\frac{\partial  \log p(x^{(i)})}{\partial<br>\theta}$, where $\theta$ are the parameters of the model.</p>
</blockquote>
<h4 id="EBMs-with-Hidden-Units"><a href="#EBMs-with-Hidden-Units" class="headerlink" title="EBMs with Hidden Units"></a>EBMs with Hidden Units</h4><p>hidden Units&#x5F15;&#x5165;&#x539F;&#x56E0;&#xFF1A;</p>
<ul>
<li>&#x65E0;&#x6CD5;&#x89C2;&#x6D4B;&#x5168;&#x6837;&#x672C;</li>
<li>&#x60F3;&#x5F15;&#x5165;&#x4E00;&#x4E9B;&#x672A;&#x89C2;&#x6D4B;&#x7684;&#x91CF;&#x6765;&#x63D0;&#x5347;&#x6A21;&#x578B;&#x8868;&#x73B0;&#x529B;</li>
</ul>
<blockquote>
<p>In many cases of interest, we do not observe the example x fully, or we want to introduce some non-observed variables to increase the expressive power of the model. So we consider an observed part (still denoted x here) and a hidden part h. We can then write:</p>
</blockquote>
<p>$$P(x) = \sum_h P(x,h) = \sum_h \frac{e^{-E(x,h)}}{Z}.$$</p>
<p>&#x6211;&#x4EEC;&#x5F15;&#x5165;&#x4E00;&#x4E2A;free energy&#x7684;&#x6982;&#x5FF5;</p>
<blockquote>
<p>In such cases, to map this formulation to one similar to Eq. (1), we introduce the notation (inspired from physics) of free energy, defined as follows:</p>
</blockquote>
<p>$$<br>\mathcal{F}(x) = - \log \sum_h e^{-E(x,h)}<br>$$</p>
<p>which allows us to write,</p>
<p>$$<br>P(x) = \frac{e^{-\mathcal{F}(x)}}{Z} \text{ with } Z=\sum_x e^{-\mathcal{F}(x)}.<br>$$</p>
<p>The data negative log-likelihood gradient then has a particularly interesting form.</p>
<p>$$<br>-\frac{\partial  \log p(x)}{\partial \theta} = \frac{\partial \mathcal{F}(x)}{\partial \theta} -<br>       \sum_{\tilde{x}} p(\tilde{x}) \<br>           \frac{\partial \mathcal{F}(\tilde{x})}{\partial\theta}<br>$$</p>
<p>&#x5361;&#x5728;&#x516C;&#x5F0F;&#x63A8;&#x5BFC;&#x4E0A;&#xFF0C;&#x5E78;&#x5F97;&#x4E00;&#x7BC7;&#x7B14;&#x8BB0;&#xFF0C;&#x4F5C;&#x8005;&#x8BE6;&#x7EC6;&#x7ED9;&#x51FA;&#x4E86;&#x63A8;&#x5BFC;&#x8FC7;&#x7A0B;&#x3002;&#x73B0;&#x76F4;&#x63A5;&#x4ECE;<a href="https://zhuanlan.zhihu.com/p/20396389?columnSlug=system" title="&#x3010;Paper&#x77E5;&#x8BC6;&#x70B9;&#x3011;Restricted Boltzmann Machines(RBM)" target="_blank" rel="external">&#x3010;Paper&#x77E5;&#x8BC6;&#x70B9;&#x3011;Restricted Boltzmann Machines(RBM)</a>&#x6252;&#x8FC7;&#x6765;&#xFF1A;</p>
<p>$$<br>log(P(x))=-F(x)-log(Z) \<br>\frac{\partial{log(P(x))}}{\partial\theta}=\frac{-F(x)}{\partial\;\theta}-\frac{log(Z)}{\partial \;\theta} \<br>\frac{\partial log(P(x))}{\partial \theta} = \frac{-F(x)}{\partial\;\theta}-\frac{1}{Z}\frac{\partial Z}{\partial \theta}\<br>\frac{\partial Z}{\partial \theta}=\sum_x \frac{e^{-F(x)}}{\partial \theta} = \sum_x e^{-F(x) } \cdot \frac{-F(x)}{\partial \theta}&#xFF08;&#x6CE8;&#x610F;\frac{\partial e^{y(x)}}{\partial x}=e^{y(x)}\cdot \frac{\partial y(x)}{\partial x}&#xFF09;\<br>\frac{\partial log(P(x))}{\partial \theta} = \frac{-F(x)}{\partial\;\theta}-\frac{1}{Z} \sum<em>x e^{-F(x) } \cdot \frac{-F(x)}{\partial \theta}\<br>\frac{\partial log(P(x))}{\partial \theta} = \frac{-F(x)}{\partial\;\theta}-\sum</em>{\tilde{x}} P(\tilde{x}) \cdot \frac{-F(\tilde{x})}{\partial \theta}\<br>-\frac{\partial log\;p(x)}{\partial\theta}=\frac{\partial \mathcal{F}(x)}{\partial \theta} - \sum_{\tilde{x}}P(\tilde{x})\frac{\partial \mathcal{F}(\tilde{x})}{\partial \theta}<br>$$</p>
<p>&#x8FD9;&#x4E2A;&#x5F0F;&#x5B50;&#x524D;&#x9762;&#x90E8;&#x5206;&#x53EB;positive phase&#xFF0C;&#x540E;&#x9762;&#x7684;&#x53EB;negative phase&#x3002;</p>
<blockquote>
<p>positive phase: increases the probability of training data, by reducing the corresponding free energy.</p>
<p>negative phase: decreases the probability of samples generated by the model.</p>
</blockquote>
<p>Negative&#x90E8;&#x5206;&#x5B9E;&#x9645;&#x4E0A;&#x662F;$\frac{\partial \mathcal{F}(\tilde{x})}{\partial\theta}$&#x5728;P&#x5206;&#x5E03;&#x4E0B;&#x7684;&#x671F;&#x671B;&#xFF1A;</p>
<p>$$ E<em>P [ \frac{\partial \mathcal{F}(x)} {\partial \theta} ] = \sum</em>{\tilde{x}} p(\tilde{x}) \<br>     \frac{\partial \mathcal{F}(\tilde{x})}{\partial\theta}$$</p>
<blockquote>
<p>It is usually difficult to determine this gradient analytically, as it involves the computation of E_P [ \frac{\partial \mathcal{F}(x)} {\partial \theta} ]. This is nothing less than an expectation over all possible configurations of the input x (under the distribution P formed by the model) !</p>
</blockquote>
<p>&#x4E8E;&#x662F;&#xFF0C;&#x76EE;&#x6807;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x8FD1;&#x4F3C;&#x8F6C;&#x5316;&#x4E3A;:<strong><br>&#x7528;fixed number of model samples&#x6765;estimate the expectation&#x4E86;</strong>&#x3002;</p>
<p>$$</p>
<ul>
<li>\frac{\partial \log p(x)}{\partial \theta}<br>\approx<br>\frac{\partial \mathcal{F}(x)}{\partial \theta} -<br> \frac{1}{|\mathcal{N}|}\sum_{\tilde{x} \in \mathcal{N}} \<br> \frac{\partial \mathcal{F}(\tilde{x})}{\partial \theta}.<br>$$<blockquote>
<p>where we would ideally like elements $\tilde{x}$ of $\mathcal{N}$ to be sampled according to P (i.e. we are doing Monte-Carlo). With the above formula, we almost have a pratical, stochastic algorithm for learning an EBM. The only missing ingredient is how to extract these negative particles $\mathcal{N}$.</p>
</blockquote>
</li>
</ul>
<h3 id="Boltzmann-Machines-BM"><a href="#Boltzmann-Machines-BM" class="headerlink" title="Boltzmann Machines(BM)"></a>Boltzmann Machines(BM)</h3><p><a href="http://image.diku.dk/igel/paper/AItRBM-proof.pdf" title="An Introduction to Restricted Boltzmann Machines" target="_blank" rel="external">An Introduction to Restricted Boltzmann Machines</a></p>
<h3 id="Restricted-Boltzmann-Machines-RBM-1"><a href="#Restricted-Boltzmann-Machines-RBM-1" class="headerlink" title="Restricted Boltzmann Machines (RBM)"></a>Restricted Boltzmann Machines (RBM)</h3><blockquote>
<p>RBM&#x901A;&#x8FC7;&#x5F15;&#x5165;hidden variables&#x8BA9;&#x6A21;&#x578B;&#x7684;&#x6548;&#x679C;&#x589E;&#x5F3A;&#xFF0C;RBM&#x6240;&#x5BF9;&#x7684;&#x56FE;&#x5FC5;&#x987B;&#x662F;&#x4E8C;&#x5206;&#x56FE;&#xFF08;&#x4E0D;&#x80FD;&#x6709;visible-visible &#x6216;&#x8005; hidden-hidden&#x8FD9;&#x6837;&#x7684;&#x8FDE;&#x63A5;&#xFF09;&#x3002; from <a href="http://deeplearning.net/tutorial/rbm.html" title="Restricted Boltzmann Machines (RBM)" target="_blank" rel="external">&#x77E5;&#x4E4E;&#x7B14;&#x8BB0;</a></p>
</blockquote>
<h4 id="Boltzmann-Machines"><a href="#Boltzmann-Machines" class="headerlink" title="Boltzmann Machines"></a>Boltzmann Machines</h4><h4 id="MRF"><a href="#MRF" class="headerlink" title="MRF"></a>MRF</h4><p><a href="http://blog.csdn.net/polly_yang/article/details/9716591" title="PGM&#x5B66;&#x4E60;&#x4E4B;&#x4E03; MRF&#xFF0C;&#x9A6C;&#x5C14;&#x79D1;&#x592B;&#x968F;&#x673A;&#x573A;" target="_blank" rel="external">PGM&#x5B66;&#x4E60;&#x4E4B;&#x4E03; MRF&#xFF0C;&#x9A6C;&#x5C14;&#x79D1;&#x592B;&#x968F;&#x673A;&#x573A;</a></p>
<h3 id="Sampling-in-an-RBM"><a href="#Sampling-in-an-RBM" class="headerlink" title="Sampling in an RBM"></a>Sampling in an RBM</h3><hr>
<p>&#x201C;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/02/深度学习/prml-note-ch01/" itemprop="url">
                  PRML_note_Ch01
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-02T19:46:00+08:00" content="2017-01-02">
              2017-01-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index">
                    <span itemprop="name">study</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#x5B66;&#x4E60;&#x8BFB;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x7ECF;&#x5178;&#x5927;&#x4F5C;&#x300A;Pattern recognition and machine learning&#x300B;&#x3002;&#x8BA1;&#x5212;1&#x4E2A;&#x6708;&#xFF0C;&#x8BFB;&#x5B8C;&#x524D;&#x56DB;&#x7AE0;&#x3002;</p>
<h2 id="1-2-Probalility-theory"><a href="#1-2-Probalility-theory" class="headerlink" title="1.2 Probalility theory"></a>1.2 Probalility theory</h2><h4 id="A-key-Concept-&#x2018;uncertainty&#x2019;"><a href="#A-key-Concept-&#x2018;uncertainty&#x2019;" class="headerlink" title="A key Concept: &#x2018;uncertainty&#x2019;:"></a>A key Concept: &#x2018;uncertainty&#x2019;:</h4><ul>
<li>it arised through noise on measurements</li>
<li>it arised through the finite size of data sets</li>
</ul>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h4><p>$B$: the identify of the box that will be chosen, can taken from $r$ (corresponding to the red box) or $b$ (coresponding to the blue);</p>
<p>define the probability of an event to be the fraction of times that events occurs out of the total number of trials</p>
<p>$p(B==r) = 4/10$</p>
<p>$p(B==b) = 6/10$</p>
<h4 id="rules"><a href="#rules" class="headerlink" title="rules:"></a>rules:</h4><blockquote>
<p>the two el- ementary rules of probability, known as the sum rule and the product rule</p>
</blockquote>
<p>joint probability<br>marginal probability<br>conditional probability</p>
<ul>
<li>sum rule</li>
</ul>
<p>$$<br>p(X=x<em>i) = \sum</em>{j=1}^L{p(X=x_i, Y=y_j)}<br>$$</p>
<p>$$<br>p(X) = \sum_Y{p(X,Y)}<br>$$</p>
<blockquote>
<p>&#x2018;marginal probability&#x2019; = sum of joint probability</p>
</blockquote>
<ul>
<li>product rule</li>
</ul>
<p>$$<br>p(X=x_i,Y=y<em>j) = \frac{n</em>{ij}}{N}=\frac {n_{ij} }{c_i} <em> \frac{c_i}{N}<br>$$<br>$$<br>= p(Y = y_j|X = x_i) </em> p(X = x_i)<br>$$</p>
<p>$$<br>p(X,Y) = p(X|Y)p(Y)<br>$$</p>
<blockquote>
<p>&#x2018;joint probability&#x2019; = &#x2018;conditional probability&#x2019; * &#x2018;marginal probability&#x2019;</p>
<p>$p(X, Y )$ is a joint probability and is verbalized as &#x201C;the probability of X and Y &#x201D;.</p>
<p>the quantity $p(Y |X)$ is a conditional probability and is verbalized as &#x201C;the probability of Y given X</p>
<p>$p(X)$ is a marginal probability  and is simply &#x201C;the probability of X&#x201D;.</p>
</blockquote>
<h4 id="Bayes&#x2019;-theorem"><a href="#Bayes&#x2019;-theorem" class="headerlink" title="Bayes&#x2019; theorem"></a>Bayes&#x2019; theorem</h4><p>$$p(Y|X) = \frac{p(X|Y){p(Y)}}{p(X)}$$</p>
<blockquote>
<p>play a central role in patten regnition and machine learning</p>
</blockquote>
<p>Give &#x2018;sum rule&#x2019;, the we have:</p>
<p>$$<br>p(X) = \sum<em>{Y}^{}{p(X,Y)} = \sum</em>{Y}^{}{p(X|Y)*p(Y)}<br>$$</p>
<h5 id="prior-probability"><a href="#prior-probability" class="headerlink" title="prior probability"></a>prior probability</h5><blockquote>
<p>&#x2026; it is the probability available before we observe some conditional event</p>
</blockquote>
<h5 id="posterior-probability"><a href="#posterior-probability" class="headerlink" title="posterior probability"></a>posterior probability</h5><blockquote>
<p>it is the probability obtained after we have observed the conditional event( the identify of the fruit)</p>
</blockquote>
<h3 id="Probability-densities"><a href="#Probability-densities" class="headerlink" title="Probability densities"></a>Probability densities</h3><h5 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h5><p>If the probability of a real-valued variable x falling in the interval $(x, x + \delta{x})$ is given by $p(x)\delta{x}$ for $\delta{x} &#x2192; 0$, then $p(x)$ is called the probability density over $x$.</p>
<h5 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h5><blockquote>
<p>For instance, if x and y are two real variables, then the sum and product rules take the form<br>$$<br>p(x) = \int p(x, y)dy \<br>p(x, y) =  p(y|x)p(x)<br>$$</p>
</blockquote>
<h3 id="Expectations-and-covariances"><a href="#Expectations-and-covariances" class="headerlink" title="Expectations and covariances"></a>Expectations and covariances</h3><p>$$<br>E[f] = \int_x p(x)f(x)dx<br>$$<br>We can also consider a conditional expectation with respect to a conditional<br>distribution, so that<br><br>$$<br>Ex[f|y] =\sum_x p(x|y)f(x)<br>$$</p>
<ul>
<li>The variance of f(x) is defined by</li>
</ul>
<p>$$<br>var[f] = E[( f(x) - E[f(x)] )^2] \<br>var[f] = E[( f(x)^2] - E[f(x)] ^2<br>$$</p>
<h2 id="Bayesian-probabilities"><a href="#Bayesian-probabilities" class="headerlink" title="Bayesian probabilities"></a>Bayesian probabilities</h2><blockquote>
<p>Now we turn to the more general Bayesian view, in which probabilities provide a quantification of uncertainty</p>
</blockquote>
<ul>
<li>quantify our expression of uncertainty</li>
<li>make precise revisions of uncertainty in the light of new evidence</li>
<li>take optimal actions or decisions as a consequence.</li>
</ul>
<h3 id="Bayes&#x2019;-theorem-example-polynomial-curve-fitting"><a href="#Bayes&#x2019;-theorem-example-polynomial-curve-fitting" class="headerlink" title="Bayes&#x2019; theorem example: polynomial curve fitting"></a>Bayes&#x2019; theorem example: polynomial curve fitting</h3><ul>
<li>a prior probability distribution</li>
</ul>
<blockquote>
<p>capture our assumptions about $w$, before observing the data, in the form of a prior probability distribution $p(w)$.</p>
</blockquote>
<ul>
<li>the conditional probability</li>
</ul>
<blockquote>
<p>The effect of the observed data $D = {t_1, . . . , t_N }$ is expressed through the conditional probability $p(D|w)$</p>
</blockquote>
<ul>
<li>likelihood function</li>
</ul>
<blockquote>
<p>The quantity $p(D|w)$ on the right-hand side of Bayes&#x2019; theorem is evaluated for the observed data set $D$ and can be viewed as a function of the parameter vector $w$,</p>
</blockquote>
<ul>
<li>Bayes&#x2019; theorem:  </li>
</ul>
<blockquote>
<p>evaluate the uncertainty in $w$ after we have observed D in the form of the posterior probability $p(w|D)$.</p>
</blockquote>
<p>$$<br>p(w|D) = \frac {p(D|w)p(w)}{p(D)}<br>$$</p>
<p>$$<br>posterior &#x221D; likelihood &#xD7; prior<br>$$</p>
<p>&#xFFFC;$$<br>p(D) = \int p(D|w)p(w) dw<br>$$</p>
<h3 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h3><ul>
<li>small-scale applications<br>-</li>
<li>large-scale applications<br>-</li>
</ul>
<h3 id="Stuck-points"><a href="#Stuck-points" class="headerlink" title="Stuck points:"></a>Stuck points:</h3><blockquote>
<p>When combined with decision theory, discussed in Section 1.5, it allows us to make optimal predictions given all the information available to us, even though that infor- mation may be incomplete or ambiguous.</p>
<p> Let us suppose that in so doing we pick the red box 40% of the time and we pick the blue box 60% of the time, and that when we remove an item of fruit from a box we are equally likely to select any of the pieces of fruit in the box.</p>
<p>Under a nonlinear change of variable, a probability density transforms differently from a simple function, due to the Jacobian factor.</p>
<p>For instance, Cox (1946) showed that if numerical values are used to represent degrees of belief, then a simple set of axioms encoding common sense properties of such beliefs leads uniquely to a set of rules for manipulating degrees of belief that are equivalent to the sum and product rules of probability.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/02/深度学习/2017-01-02-multiplelinearregression/" itemprop="url">
                  MultipleLinearRegression
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-02T11:57:00+08:00" content="2017-01-02">
              2017-01-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index">
                    <span itemprop="name">study</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/linear-regression/" itemprop="url" rel="index">
                    <span itemprop="name">linear regression</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linear-Regression-with-multiple-variables"><a href="#Linear-Regression-with-multiple-variables" class="headerlink" title="Linear Regression with multiple variables"></a>Linear Regression with multiple variables</h1><h2 id="Multiple-Feature"><a href="#Multiple-Feature" class="headerlink" title="Multiple Feature"></a>Multiple Feature</h2><h3 id="Feature-scaling"><a href="#Feature-scaling" class="headerlink" title="Feature scaling"></a>Feature scaling</h3><h4 id="Mean-Normalization"><a href="#Mean-Normalization" class="headerlink" title="Mean Normalization"></a>Mean Normalization</h4><p>$x = (x-\mu)/S$</p>
<p>&#x5176;&#x4E2D;&#xFF0C;$\mu$&#x662F;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;&#x3002;S&#x662F;&#x6837;&#x672C;&#x7684;range:(Max-Min)</p>
<h2 id="Gradient-descent"><a href="#Gradient-descent" class="headerlink" title="Gradient descent"></a>Gradient descent</h2><p>Debugging&#xFF1A; How to make sure gradient descent is working corrctly:</p>
<ul>
<li>Gradient($J(\theta)$) should decrease after evert iteration</li>
<li>Use small learning rate($\alpha$)</li>
<li>But if use too small alpha, gradient will be slow to converge</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/30/深度学习/2016-12-30-erm-learning/" itemprop="url">
                  ERM_learning
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-30T13:14:00+08:00" content="2016-12-30">
              2016-12-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index">
                    <span itemprop="name">study</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/learning-theory/" itemprop="url" rel="index">
                    <span itemprop="name">learning theory</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Stanford-Machine-Learning-Note-Learning-Theory"><a href="#Stanford-Machine-Learning-Note-Learning-Theory" class="headerlink" title="Stanford Machine Learning Note - Learning Theory"></a>Stanford Machine Learning Note - Learning Theory</h1><blockquote>
<p>&#x7406;&#x89E3;&#x4E86;&#x5B66;&#x4E60;&#x7406;&#x8BBA;&#x662F;&#x5BF9;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x53EA;&#x61C2;&#x76AE;&#x6BDB;&#x7684;&#x4EBA;&#x548C;&#x771F;&#x6B63;&#x7406;&#x89E3;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x4EBA;&#x7684;&#x533A;&#x522B;&#x3002;&#x5B66;&#x4E60;&#x7406;&#x8BBA;&#x7684;&#x91CD;&#x8981;&#x6027;&#x5728;&#x4E8E;&#x901A;&#x8FC7;&#x5B83;&#x80FD;&#x591F;&#x9488;&#x5BF9;&#x5B9E;&#x9645;&#x95EE;&#x9898;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#x6A21;&#x578B;&#xFF0C;&#x4FEE;&#x6539;&#x6A21;&#x578B;&#x3002;<br>by Andrew Ng</p>
</blockquote>
<p>&#x672C;&#x6587;&#x662F;Andrew NG&#x7B2C;&#x4E5D;&#x8BFE;&#x548C;&#x7B2C;&#x5341;&#x8BFE;&#x7684;&#x5185;&#x5BB9;&#x7B14;&#x8BB0;&#x3002;<br><a href="http://open.163.com/movie/2008/1/F/H/M6SGF6VB4_M6SGJV3FH.html" title="Lecture9">Lecture9</a>,<a href="http://open.163.com/movie/2008/1/U/O/M6SGF6VB4_M6SGJURUO.html" title="Lecture10">Lecture10</a></p>
<p>&#x8FD9;&#x4E24;&#x8BFE;&#x4ECB;&#x7ECD;Learning Theory&#xFF08;&#x5B66;&#x4E60;&#x7406;&#x8BBA;&#xFF09;&#x3002;&#x7531;&#x4E8E;&#x6570;&#x636E;&#x516C;&#x5F0F;&#x63A8;&#x5BFC;&#x8F83;&#x591A;&#xFF0C;&#x7406;&#x8BBA;&#x6027;&#x6BD4;&#x8F83;&#x5F3A;&#xFF0C;&#x770B;&#x4E86;&#x4E24;&#x904D;&#x4ECD;&#x638C;&#x63E1;&#x4E0D;&#x5230;&#x4F4D;&#x3002;&#x9042;&#x53C2;&#x8003;&#x548C;&#x5B66;&#x4E60;&#x7F51;&#x53CB;&#x76F8;&#x5173;&#x7B14;&#x8BB0;&#xFF0C;&#x505A;&#x4E00;&#x4E0B;Review&#x3002;</p>
<p>&#x672C;&#x6587;&#x6240;&#x53C2;&#x8003;&#x6587;&#x732E;&#x6750;&#x6599;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><a href="https://www.gitbook.com/book/bj6221/-/details" title="&#x7EDF;&#x8BA1;&#x5B66;&#x4E60;&#x65B9;&#x6CD5;&#xFF0C;&#x674E;&#x822A;">&#x300A;&#x7EDF;&#x8BA1;&#x5B66;&#x4E60;&#x65B9;&#x6CD5;&#x300B;,&#x674E;&#x822A;</a></li>
<li><a href="http://blog.csdn.net/stdcoutzyx/article/details/12110337" title="&#x53C2;&#x8003;&#x7B14;&#x8BB0;1&#xFF1A;">&#x65AF;&#x5766;&#x798F;ML&#x516C;&#x5F00;&#x8BFE;&#x7B14;&#x8BB0;9&#x2014;&#x504F;&#x5DEE;/&#x65B9;&#x5DEE;&#x3001;&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;&#x3001;&#x8054;&#x5408;&#x754C;&#x3001;&#x4E00;&#x81F4;&#x6536;&#x655B;</a></li>
<li><a href="https://www.zybuluo.com/a335031/note/35923" title="&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;">&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;</a></li>
<li><a href="http://blog.csdn.net/keith0812/article/details/8901113" title="svm&#x3001;&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;&#x3001;vc&#x7EF4;">svm&#x3001;&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;&#x3001;vc&#x7EF4;</a></li>
</ul>
<p>&#x5B66;&#x4E60;&#x7406;&#x8BBA;&#x4E3B;&#x8981;&#x5305;&#x62EC;:</p>
<ul>
<li>&#x504F;&#x5DEE;/&#x65B9;&#x5DEE;&#xFF08;Bias/variance&#xFF09;</li>
<li>&#x7ECF;&#x9A8C;&#x98CE;&#x9669;&#x6700;&#x5C0F;&#x5316;&#xFF08;Empirical Risk Minization&#xFF0C;ERM&#xFF09;</li>
<li>&#x8054;&#x5408;&#x754C;&#xFF08;Union bound&#xFF09;</li>
<li>&#x4E00;&#x81F4;&#x6536;&#x655B;&#xFF08;Uniform Convergence&#xFF09;&#x3002;</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/12/30/深度学习/2016-12-30-erm-learning/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/25/readingNote-1/" itemprop="url">
                  readingNote_1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-25T19:27:33+08:00" content="2016-11-25">
              2016-11-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/25/深度学习/SVD-learning-1/" itemprop="url">
                  SVD 推荐算法学习（1）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-25T19:25:11+08:00" content="2016-11-25">
              2016-11-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index">
                    <span itemprop="name">study</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/" itemprop="url" rel="index">
                    <span itemprop="name">深度学习</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/study/深度学习/SVD/" itemprop="url" rel="index">
                    <span itemprop="name">SVD</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Recently, I do some research on SVD algotirhm, with which  Recommand Systems can prefrom better. Yesterday when i came across with linger&#x2019;s blog, a article about Recommand Systems captured my attention. It list some useful papers and shared the related experiment code. Both of them seemed to be usefull. It is very likely that I can do the same experiment and check the result with blogger&#x2019;s code.</p>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><p>Before the work, I should read related work:</p>
<ul>
<li>blog article: <a href="http://blog.csdn.net/lingerlanlan/article/details/45250831" target="_blank" rel="external">http://blog.csdn.net/lingerlanlan/article/details/45250831</a></li>
<li>Paper:<ul>
<li>A Guide to Singular Value Decomposition forCollaborative Filtering:  <a href="http://www.csie.ntu.edu.tw/~r95007/thesis/svdnetflix/report/report.pdf" target="_blank" rel="external">http://www.csie.ntu.edu.tw/~r95007/thesis/svdnetflix/report/report.pdf</a></li>
<li>Collaborative Filtering for Netflix:<a href="https://classes.soe.ucsc.edu/cmps242/Fall09/proj/mpercy_svd_paper.pdf" target="_blank" rel="external">https://classes.soe.ucsc.edu/cmps242/Fall09/proj/mpercy_svd_paper.pdf</a></li>
<li>&#x5728;MovieLens&#x6570;&#x636E;&#x96C6;&#x4E0A;&#x7528;SVD&#x8FDB;&#x884C;&#x8BC4;&#x5206;&#x9884;&#x6D4B;: <a href="http://blog.csdn.net/daer520/article/details/19929523" target="_blank" rel="external">http://blog.csdn.net/daer520/article/details/19929523</a></li>
<li>&#x57FA;&#x4E8E;&#x77E9;&#x9635;&#x5206;&#x89E3;&#x7684;&#x63A8;&#x8350;&#x7B97;&#x6CD5;&#xFF0C;&#x7B80;&#x5355;&#x5165;&#x95E8; - kobeshow:<br><a href="http://itindex.net/detail/48960-%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95-kobeshow" target="_blank" rel="external">http://itindex.net/detail/48960-%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95-kobeshow</a></li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="陈22" />
          <p class="site-author-name" itemprop="name">陈22</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">34</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈22</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
<script>
  var birthDay = new Date("11/20/2014");
  var now = new Date();
  var duration = now.getTime() - birthDay.getTime();
  var total= Math.floor(duration / (1000 * 60 * 60 * 24));
  document.getElementById("showDays").innerHTML = "本站已运行 "+total+" 天";
</script>
<span id="showDays"></span>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  



  




  
  

  

  

  

  


</body>
</html>
